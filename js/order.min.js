(()=>{"use strict";addEventListener("DOMContentLoaded",(()=>{!function(){const t=document.querySelector(".js-order");t&&document.addEventListener("change",(e=>{"true"==e.target.dataset.watch&&function(t,e){let a=t.dataset.url,r="get"==e.dataset.method?"get":"post",s=e.dataset.params,o=t.querySelector("form"),n=new FormData(o);if(s){let t=JSON.parse(s);Object.keys(t).forEach((e=>{n.set(e,t[e])}))}if("get"==r){let e=(a.includes("?")?"&":"?")+new URLSearchParams(n).toString();a+=e,(async()=>{try{fetchLoader([t],"start");let e=await fetch(a);if(!e.ok)return;let r=await e.json();!0===r.status&&(updateChunks(r.chunks),selectsInit()),fetchLoader([t],"stop")}catch(t){return void console.error(t)}})()}else(async()=>{try{fetchLoader([t],"start");let e=await fetch(a,{method:"POST",body:n});if(!e.ok)return;let r=await e.json();!0===r.status&&(updateChunks(r.chunks),selectsInit()),fetchLoader([t],"stop")}catch(t){return void console.error(t)}})()}(t,e.target)}))}()}))})();