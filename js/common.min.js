(()=>{"use strict";function e(e=!1){(e?e.querySelectorAll("[data-query='true']"):document.querySelectorAll("[data-query='true']")).forEach((e=>{["focus","input"].forEach((t=>e.addEventListener(t,(()=>{(async e=>{let t=e.dataset.url,o={[e.name]:e.value},n=e.dataset.onFocus,r=e.closest(".js-query-wrapper").querySelector(".js-query-result");if(!t)return;let s=t.includes("?")?"&":"?";if(t+=s+new URLSearchParams(o).toString(),e.value.length>=2||n&&0==e.value.length)try{let e=await fetch(t);if(!e.ok)return;let o=await e.json();!0===o.status?r.innerHTML=o.content:console.error(`Error: ${JSON.stringify(o)}`)}catch(e){return void console.error(e)}})(e)}))))}))}function t(e=!1){(e?e.querySelectorAll("[data-quick-search='true']"):document.querySelectorAll("[data-quick-search='true']")).forEach((e=>{["input"].forEach((t=>e.addEventListener(t,(()=>{(e=>{let t=e.dataset.target,o=e.value.toUpperCase(),n=document.querySelector(`.${t}`),r=n.querySelectorAll("a","span"),s="";if(n&&r.length)for(let e=0;e<r.length;e++)s=r[e].textContent||r[e].innerText,s.toUpperCase().indexOf(o)>-1?r[e].style.display="":r[e].style.display="none"})(e)}))))}))}function o(e){let t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function n(e,t,o=1){let n;if(o){let e=new Date;e.setTime(e.getTime()+24*o*60*60*1e3),n="; expires="+e.toUTCString()}let r={path:"/",expires:n};r.expires instanceof Date&&(r.expires=r.expires.toUTCString());let s=encodeURIComponent(e)+"="+encodeURIComponent(t);for(let e in r){s+="; "+e;let t=r[e];!0!==t&&(s+="="+t)}document.cookie=s}window.overlay||(window.overlay=(e,t=!1)=>{const o=document.body,n=getScrollbarWidth(),r=document.querySelectorAll(".container"),s="is-active";if(e){overlay(0);const e=document.createElement("div"),a=window.scrollY;e.classList.add("overlay"),t&&(e.dataset.origin=t),o.prepend(e),o.style.top=`-${a}px`,o.classList.add("noscroll"),r.forEach((e=>{e.style.paddingRight=`${n}px`})),setTimeout((()=>{e.classList.add(s)}),0)}else{o.classList.remove("noscroll"),r.forEach((e=>{e.style.paddingRight=""}));const e=document.querySelector(".overlay");if(!e)return;e.classList.remove(s),resetTopOffset(),setTimeout((()=>{e.remove()}),250)}}),window.resetTopOffset||(window.resetTopOffset=()=>{const e=document.body,t=document.querySelector(".header"),o=e.style.top;e.style.top="",t.style.top="",window.scrollTo({left:0,top:-1*parseInt(o||"0"),behavior:"instant"})}),window.getScrollbarWidth||(window.getScrollbarWidth=()=>{let e=document.createElement("div");e.style.overflowY="scroll",e.style.width="50px",e.style.height="50px",document.body.append(e);let t=e.offsetWidth-e.clientWidth;return e.remove(),t}),window.getRandomStr||(window.getRandomStr=e=>{let t="",o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split("");e=e||Math.floor(Math.random()*o.length);for(let n=0;n<e;n++)t+=o[Math.floor(Math.random()*o.length)];return t}),window.mediaMatch||(window.mediaMatch=e=>{if(e)return!!window.matchMedia(`(max-width: ${e}px)`).matches}),window.isTouchDevice||(window.isTouchDevice=()=>{["load","resize"].forEach((e=>window.addEventListener(e,(()=>{let e=!1;window.PointerEvent&&"maxTouchPoints"in navigator||window.PointerEvent&&"msMaxTouchPoints"in navigator?navigator.maxTouchPoints>0&&(e=!0):(window.matchMedia&&window.matchMedia("(any-pointer:coarse)").matches||window.TouchEvent||"ontouchstart"in window)&&(e=!0),document.body.classList[e?"add":"remove"]("is-touch")}))))}),window.updateChunks||(window.updateChunks=(e,t=document)=>{"object"==typeof e&&null!==e?Object.entries(e).forEach((([e,o])=>{let n=t.querySelector(`[data-id=${e}]`);n&&(n.innerHTML=o)})):console.error("Chunk list is not an object")}),window.fetchLoader||(window.fetchLoader=(e,t,o={})=>{if(!e)return;let n=[];if(n=Array.isArray(e)?e:[e],"start"==t)n.forEach((e=>{if(!e)return;let t=document.createElement("div");t.classList.add("fetch");let n=document.createElement("div");n.classList.add("fetch__ring"),o.class&&t.classList.add(o.class),t.appendChild(n),e.appendChild(t),setTimeout((()=>{t.style.opacity=1}),0)}));else if("stop"==t)return void n.forEach((e=>{if(!e)return;let t=e.querySelectorAll(".fetch");t&&t.forEach((e=>{setTimeout((()=>{e.style.opacity=0,setTimeout((()=>{e.remove()}),250)}),0)}))}))}),window.btnLoader||(window.btnLoader=(e,t=!1)=>{if(!e)return;const o="btn-loader",n=e.querySelectorAll("span");if("stop"==t)return e.classList.remove(o),void n.forEach((e=>{e.style.opacity=""}));e.classList.add(o),n.forEach((e=>{e.style.opacity=0}))}),window.showSkeleton||(window.showSkeleton=(e,t)=>{if(!e||!t)return;const o=document.getElementById(t);o&&(e.innerHTML="",e.appendChild(o.content.cloneNode(!0)))}),window.showHidden||(window.showHidden=()=>{const e="hidden";document.addEventListener("click",(t=>{const o=t.target.closest(".js-show-hidden");o&&(o.parentElement.querySelectorAll(`.${e}`).forEach((t=>{t.classList.remove(e)})),o.classList.add(e))}))}),window.setWindowLocation||(window.setWindowLocation=e=>{window.history.pushState("","",e.replace("https://deviart.ru/zamm/",""))}),window.catalogItemGalleriesInit||(window.catalogItemGalleriesInit=(e=!1)=>{const t="is-active";e?e.querySelector(".item__gallery-item").classList.add(t):document.querySelectorAll(".catalog-items, .product-carousel").forEach((e=>{e&&e.querySelectorAll(".item").forEach((e=>{e.querySelector(".item__gallery-item").classList.add(t)}))}))}),window.catalogItemGalleryHandler||(window.catalogItemGalleryHandler=()=>{const e=document.querySelectorAll(".catalog-items, .product-carousel"),t="is-active";e.forEach((e=>{e&&e.addEventListener("mouseover",(e=>{const o=e.target.closest(".item");if(!o)return;const n=o.querySelector(".item__gallery-wrapper"),r=n.querySelectorAll(".item__gallery-item");n.addEventListener("mouseenter",(()=>{r.forEach((e=>{e.addEventListener("mouseenter",(()=>{e.parentElement.querySelectorAll(`.${t}`).forEach((e=>e.classList.remove(t))),e.classList.add(t)}))}))})),n.addEventListener("mouseleave",(()=>{n.querySelectorAll(`.${t}`).forEach((e=>e.classList.remove(t))),n.querySelector(".item__gallery-item").classList.add(t)}))}))}))}),window.isPropOverflowX||(window.isPropOverflowX=e=>!!e&&e.scrollWidth>e.clientWidth),window.addToSvgSprite||(window.addToSvgSprite=e=>{let t=document.querySelector(".svg-sprite");t&&t.insertAdjacentHTML("beforeend",e)});const r=document.querySelector(".cookie"),s=document.querySelector(".js-cookie__accept");if(r&&s){let e=()=>{o("policyAccepted")||r.classList.remove("hidden")},t=e=>{e.preventDefault(),n("policyAccepted","1",7),r.classList.add("hidden")};s.addEventListener("click",t),window.addEventListener("load",e)}const a=document.querySelector(".header-alert"),c=document.querySelector(".js-close-header-alert");if(a&&c){let e=()=>{o("alertHidden")||a.classList.remove("hidden")},t=e=>{e.preventDefault(),n("alertHidden","1",1),a.classList.add("hidden")};c.addEventListener("click",t),window.addEventListener("load",e)}addEventListener("DOMContentLoaded",(()=>{isTouchDevice(),showHidden(),catalogItemGalleriesInit(),catalogItemGalleryHandler(),function(e="max"){if(navigator.userAgentData&&navigator.userAgentData.brands.length&&navigator.userAgentData.brands[2].brand.indexOf("ghtho")>-1)return;const t="_dynamic_adapt_",o="data-da",n=function(){const t=[];return[...document.querySelectorAll(`[${o}]`)].forEach((e=>{const n=e.getAttribute(o),[r,s,a]=n.split(",").map((e=>e.trim())),c=document.querySelector(r);var i;c&&t.push({parent:e.parentElement,element:e,to:c,breakpoint:s??"767",order:void 0!==a?(i=a,isNaN(i)?a:Number(a)):"last",index:-1})})),function(t){const o="min"===e?1:0;return[...t].sort(((e,t)=>e.breakpoint===t.breakpoint?e.order===t.order?0:"first"===e.order||"last"===t.order?-1*o:"last"===e.order||"first"===t.order?1*o:0:(e.breakpoint-t.breakpoint)*o))}(t)}();[...new Set(n.map((({breakpoint:t})=>`(${e}-width: ${t}px),${t}`)))].map((e=>{const[t,o]=e.split(",");return{query:t,breakpoint:o}})).forEach((e=>{const o=window.matchMedia(e.query),r=function(e,o){return function(){e.matches?(o.forEach((e=>{!function(e){const{to:o,element:n,order:r}=e;e.index=function(e,t){return[...t.children].indexOf(e)}(e.element,e.element.parentElement),n.classList.add(t),"last"===r||r>=o.children.length?o.append(n):"first"!==r?o.children[r].before(n):o.prepend(n)}(e)})),o.reverse()):(o.forEach((e=>{e.element.classList.contains(t)&&function(e){const{parent:o,element:n,index:r}=e;n.classList.remove(t),r>=0&&o.children[r]?o.children[r].before(n):o.append(n)}(e)})),o.reverse())}}(o,n.filter((({breakpoint:t})=>t===e.breakpoint)));o.addEventListener("change",r),r()}))}(),function(){const e=document.querySelector("header"),t="is-ontop",o="is-hidden";if(!e)return;let n=0;window.addEventListener("scroll",(()=>{0==window.scrollY&&e.classList.add(t),window.scrollY>56&&(window.scrollY>n?(e.classList.remove(t),e.classList.add(o)):window.scrollY<n&&(e.classList.add("is-sticky"),e.classList.remove(o))),n=window.scrollY}))}(),function(){const e=document.querySelector(".nav__menu"),t=document.getElementById("menu-toggle"),o=document.querySelector(".catalog__submenu"),n=document.querySelectorAll(".catalog__list .catalog__link"),r=document.querySelector(".nav__back"),s="is-active";n.forEach((e=>{e.addEventListener("click",(t=>{const n=e.nextElementSibling;if(n){t.preventDefault();const e=n.cloneNode(!0);e.classList.add(s),o.classList.add(s),o.innerHTML="",o.append(e),r.classList.add(s)}}))})),r.addEventListener("click",(()=>{r.classList.remove(s),o.classList.remove(s),setTimeout((()=>{o.innerHTML=""}),250)})),t.addEventListener("change",(()=>{t.checked||(r.classList.remove(s),o.classList.remove(s),e.classList.remove("hide-nav"),o.innerHTML="")})),window.addEventListener("resize",(()=>{t.checked&&t.click()})),document.addEventListener("click",(o=>{!e.contains(o.target)&&t.checked&&t.click()}))}(),function(){let o=(e,t=!1,o=!1,r=!1)=>{const s=(()=>{const e="modal",t=document.querySelector(`.${e}`);t&&t.remove();const o=document.createElement("div"),n=document.createElement("button");return o.classList.add(e,"scrollblock"),n.classList.add("btn","btn_close","btn_close-modal","js-modal-close"),n.ariaLabel="Закрыть",o.appendChild(n),document.body.appendChild(o),o})(),a=document.getElementById("menu-toggle");t&&(s.style.maxWidth=`${parseInt(t)}px`),s.insertAdjacentHTML("beforeend",e),n(s),setTimeout((()=>{a.checked=!1,s.classList.add("is-active"),overlay(1)}),10),o&&r&&(o.dataset.storageKey=r,localStorage.setItem(r,e))},n=o=>{e(o),t(o)};document.addEventListener("click",(e=>{const t=document.querySelector(".modal"),n=e.target.closest(".js-modal-show"),r=e.target.closest([".js-modal-close",".overlay"]);if(n){const e=n.dataset.url,t=n.dataset.boxWidth,r=n.dataset.storageKey;if(!e)return;if(r){const e=localStorage.getItem(r);if(e)return void o(e,t)}(async(e,t)=>{if(!e)return;let n=t.dataset.boxWidth||!1;try{let r=await fetch(e);if(!r.ok)return;let s=await r.json();if(!0===s.status){if(!0===s.nocache)o(s.content,n);else{const e=getRandomStr(8);o(s.content,n,t,e)}s.svg&&addToSvgSprite(s.svg)}else console.error(`Error: ${JSON.stringify(s)}`)}catch(e){return void console.error(e)}})(e,n)}!t||t.contains(e.target)&&!r||(t.remove(),overlay(0))}))}(),document.addEventListener("click",(e=>{const t=e.target.closest(".js-close"),o="is-active";if(!t)return;const n=t.closest(`.${o}`);n&&(overlay(0),resetTopOffset(),n.classList.remove(o))})),function(){const e=document.querySelector(".nav__menu"),t=document.getElementById("menu-toggle"),o=document.querySelector(".nav__search"),n=document.querySelector(".input_nav-search"),r=document.querySelector(".js-close-search"),s="is-active",a="hide-nav";n.addEventListener("focus",(()=>{o.classList.add(s),t.checked&&e.classList.add(a)})),r.addEventListener("click",(()=>{o.classList.remove(s),e.classList.remove(a)})),document.addEventListener("click",(e=>{o.contains(e.target)||t.checked||o.classList.remove(s)}))}(),e(),t(),document.querySelectorAll(".js-accordion__trigger").forEach((e=>{e.addEventListener("click",(()=>{const t=e.parentElement,o=e.nextElementSibling;t.classList.contains("on")&&(e.classList.toggle("is-opened"),o.style.maxHeight?o.style.maxHeight=null:o.style.maxHeight=o.scrollHeight+"px")}))})),function(){const e=document.querySelectorAll(".f-menu.js-accordion");let t;["load","resize"].forEach((o=>window.addEventListener(o,(()=>{t||(t=setTimeout((function(){t=null,mediaMatch("767")?e.forEach((e=>{e.classList.add("on")})):e.forEach((e=>{e.classList.remove("on")}))}),200))}))))}(),window.addEventListener("click",(e=>{document.querySelectorAll(".drop-down__box").forEach((t=>{t.contains(e.target)||t.parentNode.classList.remove("is-active")}))})),document.querySelectorAll(".js-drop-down").forEach((e=>{e.addEventListener("click",(t=>{t.stopPropagation(),e.classList.toggle("is-active")}))})),function(){const e="is-active",t="popup-gallery";document.addEventListener("click",(o=>{let n=o.target.closest(".js-popup-gallery"),r=document.body,s=document.querySelector(".header-alert"),a=document.querySelector(".header"),c=document.querySelectorAll(".container"),i=a.getBoundingClientRect().height,l=window.scrollY,d=getScrollbarWidth(),u=mediaMatch("1023");if(s&&(i+=s.getBoundingClientRect().height),!n||u)return;let m=t=>{r.style.top=`-${l}px`,r.classList.add("noscroll"),a.style.top=`${l}px`,a.classList.remove("is-hidden"),c.forEach((e=>{e.style.paddingRight=`${d}px`})),t.classList.add(e),t.style.top=`${i}px`};const h=n.dataset.target,p=n.dataset.url;if(h&&p){const e=document.querySelector(`.${h}`);if(e)m(e);else{const e=document.createElement("div");e.classList.add(t,h),r.append(e),(async()=>{try{let t=await fetch(p);if(!t.ok)return;let o=await t.text();e.innerHTML=o,carouselsInit(),m(e)}catch(e){return void console.error(e)}})()}}else if(h&&!p){const e=document.querySelector(`.${h}`);m(e)}})),window.addEventListener("resize",(()=>{const o=document.querySelector(`.${t}.${e}`);o&&(o.classList.remove(e),document.body.classList.remove("noscroll"),document.querySelectorAll(".container").forEach((e=>{e.style.paddingRight=""})),resetTopOffset())}))}()}))})();