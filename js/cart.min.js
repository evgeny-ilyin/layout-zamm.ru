(()=>{"use strict";function t(t,e,a){const r=t.dataset.url,s=t.querySelector("form");let n=new FormData(s),o=Object.fromEntries(n.entries()),i=new FormData;i.append("trigger",a),i.append("itemId",e),i.append("formData",JSON.stringify(o)),(async()=>{try{let t=await fetch(r,{method:"POST",body:i});if(!t.ok)return;let e=await t.json();if(!0===e.status&&(updateChunks(e.chunks),carouselsInit(),catalogItemGalleriesInit(),catalogItemGalleryHandler(),e.addedId||e.removedId)){let t=e.addedId||e.removedId;const a=document.querySelector(`button[data-id="${t}"]`);if(!a)return;const r=a.closest(".item__details");e.addedId?(a.classList.add("in-cart"),r.style.opacity=1):e.removedId&&(a.classList.remove("in-cart"),r.style.opacity="")}}catch(t){return void console.error(t)}})()}const e=document.querySelector(".cart__main form");document.addEventListener("click",(t=>{t.target.closest(".cart-total__button button")&&(t.preventDefault(),e&&e.submit())})),addEventListener("DOMContentLoaded",(()=>{!function(){const e=document.querySelector(".cart");e&&e.addEventListener("click",(a=>{if(a.target.classList.contains("js-btn-minus")){let r=a.target.closest(".cart-item").dataset.itemId,s=a.target.nextElementSibling;if(s.getAttribute("min")==s.value)return;s.stepDown(),t(e,r,"changeAmountCart")}if(a.target.classList.contains("js-btn-plus")){let r=a.target.closest(".cart-item").dataset.itemId,s=a.target.previousElementSibling;if(s.getAttribute("max")==s.value)return;s.stepUp(),t(e,r,"changeAmountCart")}if(a.target.closest(".js-remove-from-cart")){let r=a.target.closest(".cart-item").dataset.itemId;t(e,r,"removeItemCart")}if(a.target.closest(".js-add-to-cart")){let r=a.target.closest(".js-add-to-cart").dataset.id;t(e,r,"addItemCart")}}))}()}))})();