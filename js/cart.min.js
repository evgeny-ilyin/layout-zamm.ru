(()=>{"use strict";function t(t,e,a){const r=t.dataset.url,d=t.querySelector("form");let s=new FormData(d),o=Object.fromEntries(s.entries()),c=new FormData;c.append("trigger",a),c.append("itemId",e),c.append("formData",JSON.stringify(o)),(async()=>{try{fetchLoader([t],"start");let e=await fetch(r,{method:"POST",body:c});if(!e.ok)return;let a=await e.json();if(!0===a.status&&(carouselsInit(),catalogItemGalleriesInit(),catalogItemGalleryHandler(),a.chunks&&updateChunks(a.chunks),a.addedId||a.removedId)){let t=a.addedId||a.removedId;const e=document.querySelector(`button[data-id="${t}"]`);if(e){const t=e.closest(".item__details");a.addedId?(e.classList.add("in-cart"),t.style.opacity=1):a.removedId&&(e.classList.remove("in-cart"),t.style.opacity="")}}fetchLoader([t],"stop")}catch(t){return void console.error(t)}})()}addEventListener("DOMContentLoaded",(()=>{!function(){const e=document.querySelector(".js-cart");e&&(document.addEventListener("change",(a=>{if(a.target.closest(".cart-item")){let r=a.target.closest(".cart-item").dataset.itemId;t(e,r,"changeAmountCart")}})),e.addEventListener("click",(a=>{if(a.target.closest(".js-remove-from-cart")){let r=a.target.closest(".cart-item").dataset.itemId;t(e,r,"removeItemCart")}if(a.target.closest(".js-add-to-cart")){let r=a.target.closest(".js-add-to-cart").dataset.id;t(e,r,"addItemCart")}})))}()}))})();