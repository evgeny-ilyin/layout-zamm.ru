(()=>{"use strict";window.productProps||(window.productProps=()=>{document.addEventListener("change",(e=>{if(!e.target.closest(".prop"))return;const t=e.target,o=t.closest(".item"),r=t.closest(".item__details"),s=t.closest(".product"),a=t.closest("form");if(!a)return;let n=new FormData(a),c={},l={},d=t.dataset.url;c={name:t.name,checked:!0},t.dataset.params&&(l={params:JSON.parse(t.dataset.params)}),Object.assign(c,l),n.append("element",JSON.stringify(c)),o&&(async()=>{try{fetchLoader([o,r],"start");let e=await fetch(d,{method:"POST",body:n});if(!e.ok)return;let t=await e.json();!0===t.status&&(updateChunks(t.chunks,o),catalogItemGalleriesInit(o),productPropsCollapseHandler(o)),fetchLoader([o,r],"stop")}catch(e){return void console.error(e)}})(),s&&(async()=>{try{fetchLoader([s],"start");let e=await fetch(d,{method:"POST",body:n});if(!e.ok)return;let t=await e.json();!0===t.status&&(updateChunks(t.chunks),tabsInit(),carouselsInit()),t.url&&setWindowLocation(t.url),fetchLoader([s],"stop")}catch(e){return void console.error(e)}})()}))}),window.productPropsHoverHandler||(window.productPropsHoverHandler=()=>{const e=document.querySelectorAll(".catalog-items, .product-carousel");e.length&&e.forEach((e=>{e.addEventListener("mouseover",(e=>{const t=e.target.closest(".item");t&&!document.body.classList.contains("is-touch")&&t.addEventListener("mouseenter",(()=>{const e=t.dataset.url,o=t.querySelector(".item__details"),r=t.querySelector(".skeleton");e&&(!o||o.innerHTML.trim().length&&!r||t.classList.contains("loading")||(t.classList.add("loading"),showSkeleton(o,"tpl-props"),(async()=>{try{let r=await fetch(e);if(!r.ok)return;let s=await r.text();o.innerHTML="",o.innerHTML=s,t.classList.remove("loading"),productPropsCollapseHandler(t)}catch(e){return void console.error(e)}})()))}))}))}))}),window.productPropsCollapseHandler||(window.productPropsCollapseHandler=e=>{if(!e)return;const t=e.querySelectorAll(".js-prop-collapse"),o="is-opened";t.forEach((e=>{let t=e.parentElement,r=t.querySelector('input[type="hidden"]');t.classList.contains(o)||isStrOverflowX(t)?e.addEventListener("click",(()=>{t.classList.toggle(o),r.value=1==r.value?0:1})):e.classList.add("hidden")}))}),addEventListener("DOMContentLoaded",(()=>{productProps(),productPropsHoverHandler()}))})();