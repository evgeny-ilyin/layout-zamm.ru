(()=>{"use strict";window.productProps||(window.productProps=()=>{document.addEventListener("change",(e=>{if(!e.target.closest(".prop"))return;const t=e.target,o=t.closest(".item"),r=t.closest(".item__details"),s=t.closest(".product__options"),a=t.closest("form");if(!a)return;let n=new FormData(a),l={},c={},d=t.dataset.url,i=Object.fromEntries(n.entries());l={name:t.name,checked:!0},t.dataset.params&&(c=JSON.parse(t.dataset.params)),Object.assign(l,c,i),o&&(async()=>{try{fetchLoader([o,r],"start");let e=await fetch(d,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(l)});if(!e.ok)return;let t=await e.json();!0===t.status&&p(t,o),catalogItemGalleriesInit(o),productPropsCollapseHandler(o),fetchLoader([o,r],"stop")}catch(e){return void console.log(e)}})(),s&&(async()=>{try{fetchLoader([s],"start");let e=await fetch(d,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(l)});if(!e.ok)return;let t=await e.json();!0===t.status&&p(t,s),t.url&&setWindowLocation(t.url),fetchLoader([s],"stop")}catch(e){return void console.log(e)}})();let p=(e,t)=>{Object.entries(e.chunks).forEach((([e,o])=>{if(o.length){let r=t.querySelector(`[data-id=${e}]`);if(!r)return void console.log(`data-id ${e} not found`);r.innerHTML=o}}))}}))}),window.productPropsHoverHandler||(window.productPropsHoverHandler=()=>{const e=document.querySelectorAll(".catalog-items, .product-carousel");e.length&&e.forEach((e=>{e.addEventListener("mouseover",(e=>{const t=e.target.closest(".item");t&&t.addEventListener("mouseenter",(()=>{const e=t.dataset.url,o=t.querySelector(".item__details"),r=t.querySelector(".skeleton");o.innerHTML.trim().length&&!r||(showSkeleton(o,"tpl-props"),(async()=>{try{let r=await fetch(e);if(!r.ok)return;let s=await r.text();o.innerHTML="",o.innerHTML=s,productPropsCollapseHandler(t)}catch(e){return void console.log(e)}})())}))}))}))}),window.productPropsCollapseHandler||(window.productPropsCollapseHandler=e=>{if(!e)return;const t=e.querySelectorAll(".js-prop-collapse"),o="is-opened";t.forEach((e=>{let t=e.parentElement,r=t.querySelector('input[type="hidden"]');t.classList.contains(o)||isPropOverflowX(t)?e.addEventListener("click",(()=>{t.classList.toggle(o),r.value=1==r.value?0:1})):e.classList.add("hidden")}))}),addEventListener("DOMContentLoaded",(()=>{productProps(),productPropsHoverHandler()}))})();