(()=>{"use strict";function t(t){if(!t)return;const e=t.querySelectorAll(".js-prop-collapse"),o="is-opened";e.forEach((t=>{let e=t.parentElement,n=e.querySelector('input[type="hidden"]');e.classList.contains(o)||isPropOverflowX(e)?t.addEventListener("click",(()=>{e.classList.toggle(o),n.value=1==n.value?0:1})):t.classList.add("hidden")}))}addEventListener("DOMContentLoaded",(()=>{document.addEventListener("change",(e=>{if(!e.target.closest(".prop"))return;const o=e.target,n=o.closest(".item"),r=o.closest(".item__details"),s=o.closest(".product__options"),a=o.closest("form");if(!a)return;let c=new FormData(a),i={},l={},d=o.dataset.url,u=Object.fromEntries(c.entries());i={name:o.name,checked:!0},o.dataset.params&&(l=JSON.parse(o.dataset.params)),Object.assign(i,l,u),n&&(async()=>{try{fetchLoader([n,r],"start");let e=await fetch(d,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(i)});if(!e.ok)return;let o=await e.json();!0===o.status&&f(o,n),catalogItemGalleriesInit(n),t(n),fetchLoader([n,r],"stop")}catch(t){return void console.log(t)}})(),s&&(async()=>{try{fetchLoader([s],"start");let t=await fetch(d,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(i)});if(!t.ok)return;let e=await t.json();!0===e.status&&f(e,s),e.url&&setWindowLocation(e.url),fetchLoader([s],"stop")}catch(t){return void console.log(t)}})();let f=(t,e)=>{Object.entries(t.chunks).forEach((([t,o])=>{if(o.length){let n=e.querySelector(`[data-id=${t}]`);if(!n)return void console.log(`data-id ${t} not found`);n.innerHTML=o}}))}})),function(){const e=document.querySelectorAll(".catalog-items, .product-carousel");e.length&&e.forEach((e=>{e.addEventListener("mouseover",(e=>{const o=e.target.closest(".item");o&&o.addEventListener("mouseenter",(()=>{const e=o.dataset.url,n=o.querySelector(".item__details"),r=o.querySelector(".skeleton");n.innerHTML.trim().length&&!r||(showSkeleton(n,"tpl-props"),(async()=>{try{let r=await fetch(e);if(!r.ok)return;let s=await r.text();n.innerHTML="",n.innerHTML=s,t(o)}catch(t){return void console.log(t)}})())}))}))}))}()}))})();