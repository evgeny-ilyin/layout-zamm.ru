(()=>{"use strict";function t(t){if(!t)return;const e=t.querySelectorAll(".js-prop-collapse"),o="is-opened";e.forEach((t=>{let e=t.parentElement,n=e.querySelector('input[type="hidden"]');e.classList.contains(o)||isPropOverflowX(e)?t.addEventListener("click",(()=>{e.classList.toggle(o),n.value=1==n.value?0:1})):t.classList.add("hidden")}))}addEventListener("DOMContentLoaded",(()=>{document.addEventListener("change",(e=>{if(!e.target.closest(".prop"))return;const o=e.target,n=o.closest(".item"),s=o.closest(".item__details"),r=o.closest(".product__options"),a=o.closest("form");if(!a)return;let i=new FormData(a),c={},l={},d=o.dataset.url,u=Object.fromEntries(i.entries());c={name:o.name,checked:!0},o.dataset.params&&(l=JSON.parse(o.dataset.params)),Object.assign(c,l,u),n&&(async()=>{try{fetchLoader([n,s],"start");let e=await fetch(d,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(c)});if(!e.ok)return;let o=await e.json();!0===o.status&&f(o,n),catalogItemGalleriesInit(n),t(n),fetchLoader([n,s],"stop")}catch(t){return void console.log(t)}})(),r&&(async()=>{try{fetchLoader([r],"start");let t=await fetch(d,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(c)});if(!t.ok)return;let e=await t.json();!0===e.status&&f(e,r),e.url&&setWindowLocation(e.url),fetchLoader([r],"stop")}catch(t){return void console.log(t)}})();let f=(t,e)=>{Object.entries(t.chunks).forEach((([t,o])=>{if(o.length){let n=e.querySelector(`[data-id=${t}]`);if(!n)return void console.log(`data-id ${t} not found`);n.innerHTML=o}}))}})),function(){const e=document.querySelector(".catalog-items");e&&e.addEventListener("mouseover",(e=>{const o=e.target.closest(".item");o&&o.addEventListener("mouseenter",(()=>{const e=o.dataset.url,n=o.querySelector(".item__details"),s=o.querySelector(".skeleton");n.innerHTML.trim().length&&!s||(showSkeleton(n,"tpl-props"),(async()=>{try{let s=await fetch(e);if(!s.ok)return;let r=await s.text();n.innerHTML="",n.innerHTML=r,t(o)}catch(t){return void console.log(t)}})())}))}))}()}))})();