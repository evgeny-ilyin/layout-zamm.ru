/*! For license information please see catalog.min.js.LICENSE.txt */
(()=>{var t={18:(t,e)=>{var i,n;void 0===(n="function"==typeof(i=function(){"use strict";var t=["decimals","thousand","mark","prefix","suffix","encoder","decoder","negativeBefore","negative","edit","undo"];function e(t){return t.split("").reverse().join("")}function i(t,e){return t.substring(0,e.length)===e}function n(t,e,i){if((t[e]||t[i])&&t[e]===t[i])throw new Error(e)}function s(t){return"number"==typeof t&&isFinite(t)}function o(t,i,n,o,r,a,l,c,h,u,d,p){var f,m,g,b,v,y=p,S="",w="";return a&&(p=a(p)),!!s(p)&&(!1!==t&&0===parseFloat(p.toFixed(t))&&(p=0),p<0&&(f=!0,p=Math.abs(p)),!1!==t&&(v=t,b=(b=p).toString().split("e"),p=(+((b=(b=Math.round(+(b[0]+"e"+(b[1]?+b[1]+v:v)))).toString().split("e"))[0]+"e"+(b[1]?+b[1]-v:-v))).toFixed(v)),-1!==(p=p.toString()).indexOf(".")?(g=(m=p.split("."))[0],n&&(S=n+m[1])):g=p,i&&(g=e(g).match(/.{1,3}/g),g=e(g.join(e(i)))),f&&c&&(w+=c),o&&(w+=o),f&&h&&(w+=h),w+=g,w+=S,r&&(w+=r),u&&(w=u(w,y)),w)}function r(t,e,n,o,r,a,l,c,h,u,d,p){var f,m="";return d&&(p=d(p)),!(!p||"string"!=typeof p)&&(c&&i(p,c)&&(p=p.replace(c,""),f=!0),o&&i(p,o)&&(p=p.replace(o,"")),h&&i(p,h)&&(p=p.replace(h,""),f=!0),r&&function(t,e){return t.slice(-1*e.length)===e}(p,r)&&(p=p.slice(0,-1*r.length)),e&&(p=p.split(e).join("")),n&&(p=p.replace(n,".")),f&&(m+="-"),""!==(m=(m+=p).replace(/[^0-9\.\-.]/g,""))&&(m=Number(m),l&&(m=l(m)),!!s(m)&&m))}function a(e,i,n){var s,o=[];for(s=0;s<t.length;s+=1)o.push(e[t[s]]);return o.push(n),i.apply("",o)}return function e(i){if(!(this instanceof e))return new e(i);"object"==typeof i&&(i=function(e){var i,s,o,r={};for(void 0===e.suffix&&(e.suffix=e.postfix),i=0;i<t.length;i+=1)if(void 0===(o=e[s=t[i]]))"negative"!==s||r.negativeBefore?"mark"===s&&"."!==r.thousand?r[s]=".":r[s]=!1:r[s]="-";else if("decimals"===s){if(!(o>=0&&o<8))throw new Error(s);r[s]=o}else if("encoder"===s||"decoder"===s||"edit"===s||"undo"===s){if("function"!=typeof o)throw new Error(s);r[s]=o}else{if("string"!=typeof o)throw new Error(s);r[s]=o}return n(r,"mark","thousand"),n(r,"prefix","negative"),n(r,"prefix","negativeBefore"),r}(i),this.to=function(t){return a(i,o,t)},this.from=function(t){return a(i,r,t)})}})?i.apply(e,[]):i)||(t.exports=n)}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,i),o.exports}(()=>{"use strict";const t=(t,e=1e4)=>(t=parseFloat(t+"")||0,Math.round((t+Number.EPSILON)*e)/e),e=function(t,i){return!(!t||t===document.body||i&&t===i)&&(function(t){if(!(t&&t instanceof Element&&t.offsetParent))return!1;const e=t.scrollHeight>t.clientHeight,i=window.getComputedStyle(t).overflowY,n=-1!==i.indexOf("hidden"),s=-1!==i.indexOf("visible");return e&&!n&&!s}(t)?t:e(t.parentElement,i))},n=function(t){var e=(new DOMParser).parseFromString(t,"text/html").body;if(e.childElementCount>1){for(var i=document.createElement("div");e.firstChild;)i.appendChild(e.firstChild);return i}return e.firstChild},s=t=>`${t||""}`.split(" ").filter((t=>!!t)),o=(t,e,i)=>{s(e).forEach((e=>{t&&t.classList.toggle(e,i||!1)}))};class r{constructor(t){Object.defineProperty(this,"pageX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pageY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nativePointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.nativePointer=t,this.pageX=t.pageX,this.pageY=t.pageY,this.clientX=t.clientX,this.clientY=t.clientY,this.id=self.Touch&&t instanceof Touch?t.identifier:-1,this.time=Date.now()}}const a={passive:!1};class l{constructor(t,{start:e=(()=>!0),move:i=(()=>{}),end:n=(()=>{})}){Object.defineProperty(this,"element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moveCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"endCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"startPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.element=t,this.startCallback=e,this.moveCallback=i,this.endCallback=n;for(const t of["onPointerStart","onTouchStart","onMove","onTouchEnd","onPointerEnd","onWindowBlur"])this[t]=this[t].bind(this);this.element.addEventListener("mousedown",this.onPointerStart,a),this.element.addEventListener("touchstart",this.onTouchStart,a),this.element.addEventListener("touchmove",this.onMove,a),this.element.addEventListener("touchend",this.onTouchEnd),this.element.addEventListener("touchcancel",this.onTouchEnd)}onPointerStart(t){if(!t.buttons||0!==t.button)return;const e=new r(t);this.currentPointers.some((t=>t.id===e.id))||this.triggerPointerStart(e,t)&&(window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseup",this.onPointerEnd),window.addEventListener("blur",this.onWindowBlur))}onTouchStart(t){for(const e of Array.from(t.changedTouches||[]))this.triggerPointerStart(new r(e),t);window.addEventListener("blur",this.onWindowBlur)}onMove(t){const e=this.currentPointers.slice(),i="changedTouches"in t?Array.from(t.changedTouches||[]).map((t=>new r(t))):[new r(t)],n=[];for(const t of i){const e=this.currentPointers.findIndex((e=>e.id===t.id));e<0||(n.push(t),this.currentPointers[e]=t)}n.length&&this.moveCallback(t,this.currentPointers.slice(),e)}onPointerEnd(t){t.buttons>0&&0!==t.button||(this.triggerPointerEnd(t,new r(t)),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur))}onTouchEnd(t){for(const e of Array.from(t.changedTouches||[]))this.triggerPointerEnd(t,new r(e))}triggerPointerStart(t,e){return!!this.startCallback(e,t,this.currentPointers.slice())&&(this.currentPointers.push(t),this.startPointers.push(t),!0)}triggerPointerEnd(t,e){const i=this.currentPointers.findIndex((t=>t.id===e.id));i<0||(this.currentPointers.splice(i,1),this.startPointers.splice(i,1),this.endCallback(t,e,this.currentPointers.slice()))}onWindowBlur(){this.clear()}clear(){for(;this.currentPointers.length;){const t=this.currentPointers[this.currentPointers.length-1];this.currentPointers.splice(this.currentPointers.length-1,1),this.startPointers.splice(this.currentPointers.length-1,1),this.endCallback(new Event("touchend",{bubbles:!0,cancelable:!0,clientX:t.clientX,clientY:t.clientY}),t,this.currentPointers.slice())}}stop(){this.element.removeEventListener("mousedown",this.onPointerStart,a),this.element.removeEventListener("touchstart",this.onTouchStart,a),this.element.removeEventListener("touchmove",this.onMove,a),this.element.removeEventListener("touchend",this.onTouchEnd),this.element.removeEventListener("touchcancel",this.onTouchEnd),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur)}}function c(t,e){return e?Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2)):0}function h(t,e){return e?{clientX:(t.clientX+e.clientX)/2,clientY:(t.clientY+e.clientY)/2}:t}const u=t=>"object"==typeof t&&null!==t&&t.constructor===Object&&"[object Object]"===Object.prototype.toString.call(t),d=(t,...e)=>{const i=e.length;for(let n=0;n<i;n++){const i=e[n]||{};Object.entries(i).forEach((([e,i])=>{const n=Array.isArray(i)?[]:{};t[e]||Object.assign(t,{[e]:n}),u(i)?Object.assign(t[e],d(n,i)):Array.isArray(i)?Object.assign(t,{[e]:[...i]}):Object.assign(t,{[e]:i})}))}return t},p=function(t,e){return t.split(".").reduce(((t,e)=>"object"==typeof t?t[e]:void 0),e)};class f{constructor(t={}){Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.setOptions(t);for(const t of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))t.startsWith("on")&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}setOptions(t){this.options=t?d({},this.constructor.defaults,t):{};for(const[t,e]of Object.entries(this.option("on")||{}))this.on(t,e)}option(t,...e){let i=p(t,this.options);return i&&"function"==typeof i&&(i=i.call(this,this,...e)),i}optionFor(t,e,i,...n){let s=p(e,t);var o;"string"!=typeof(o=s)||isNaN(o)||isNaN(parseFloat(o))||(s=parseFloat(s)),"true"===s&&(s=!0),"false"===s&&(s=!1),s&&"function"==typeof s&&(s=s.call(this,this,t,...n));let r=p(e,this.options);return r&&"function"==typeof r?s=r.call(this,this,t,...n,s):void 0===s&&(s=r),void 0===s?i:s}cn(t){const e=this.options.classes;return e&&e[t]||""}localize(t,e=[]){t=String(t).replace(/\{\{(\w+).?(\w+)?\}\}/g,((t,e,i)=>{let n="";return i?n=this.option(`${e[0]+e.toLowerCase().substring(1)}.l10n.${i}`):e&&(n=this.option(`l10n.${e}`)),n||(n=t),n}));for(let i=0;i<e.length;i++)t=t.split(e[i][0]).join(e[i][1]);return t.replace(/\{\{(.*?)\}\}/g,((t,e)=>e))}on(t,e){let i=[];"string"==typeof t?i=t.split(" "):Array.isArray(t)&&(i=t),this.events||(this.events=new Map),i.forEach((t=>{let i=this.events.get(t);i||(this.events.set(t,[]),i=[]),i.includes(e)||i.push(e),this.events.set(t,i)}))}off(t,e){let i=[];"string"==typeof t?i=t.split(" "):Array.isArray(t)&&(i=t),i.forEach((t=>{const i=this.events.get(t);if(Array.isArray(i)){const t=i.indexOf(e);t>-1&&i.splice(t,1)}}))}emit(t,...e){[...this.events.get(t)||[]].forEach((t=>t(this,...e))),"*"!==t&&this.emit("*",t,...e)}}Object.defineProperty(f,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.22"}),Object.defineProperty(f,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}});class m extends f{constructor(t={}){super(t),Object.defineProperty(this,"plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}})}attachPlugins(t={}){const e=new Map;for(const[i,n]of Object.entries(t)){const t=this.option(i),s=this.plugins[i];s||!1===t?s&&!1===t&&(s.detach(),delete this.plugins[i]):e.set(i,new n(this,t||{}))}for(const[t,i]of e)this.plugins[t]=i,i.attach();this.emit("attachPlugins")}detachPlugins(t){t=t||Object.keys(this.plugins);for(const e of t){const t=this.plugins[e];t&&t.detach(),delete this.plugins[e]}return this.emit("detachPlugins"),this}}var g;!function(t){t[t.Init=0]="Init",t[t.Error=1]="Error",t[t.Ready=2]="Ready",t[t.Panning=3]="Panning",t[t.Mousemove=4]="Mousemove",t[t.Destroy=5]="Destroy"}(g||(g={}));const b=["a","b","c","d","e","f"],v='<div class="f-spinner"><svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="20"></circle><circle cx="25" cy="25" r="20"></circle></svg></div>',y=t=>t&&null!==t&&t instanceof Element&&"nodeType"in t,S=(t,e)=>{t&&s(e).forEach((e=>{t.classList.remove(e)}))},w=(t,e)=>{t&&s(e).forEach((e=>{t.classList.add(e)}))},x={a:1,b:0,c:0,d:1,e:0,f:0},E=1e3,P="mousemove",O="drag",M="content";let L=null,T=null;class k extends m{get isTouchDevice(){return null===T&&(T=window.matchMedia("(hover: none)").matches),T}get isMobile(){return null===L&&(L=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)),L}get panMode(){return this.options.panMode!==P||this.isTouchDevice?O:P}get panOnlyZoomed(){const t=this.options.panOnlyZoomed;return"auto"===t?this.isTouchDevice:t}get isInfinite(){return this.option("infinite")}get angle(){return 180*Math.atan2(this.current.b,this.current.a)/Math.PI||0}get targetAngle(){return 180*Math.atan2(this.target.b,this.target.a)/Math.PI||0}get scale(){const{a:t,b:e}=this.current;return Math.sqrt(t*t+e*e)||1}get targetScale(){const{a:t,b:e}=this.target;return Math.sqrt(t*t+e*e)||1}get minScale(){return this.option("minScale")||1}get fullScale(){const{contentRect:t}=this;return t.fullWidth/t.fitWidth||1}get maxScale(){return this.fullScale*(this.option("maxScale")||1)||1}get coverScale(){const{containerRect:t,contentRect:e}=this,i=Math.max(t.height/e.fitHeight,t.width/e.fitWidth)||1;return Math.min(this.fullScale,i)}get isScaling(){return Math.abs(this.targetScale-this.scale)>1e-5&&!this.isResting}get isContentLoading(){const t=this.content;return!!(t&&t instanceof HTMLImageElement)&&!t.complete}get isResting(){if(this.isBouncingX||this.isBouncingY)return!1;for(const t of b){const e="e"==t||"f"===t?.001:1e-5;if(Math.abs(this.target[t]-this.current[t])>e)return!1}return!(!this.ignoreBounds&&!this.checkBounds().inBounds)}constructor(t,e={},i={}){var s;if(super(e),Object.defineProperty(this,"pointerTracker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"updateTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"rAF",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isTicking",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"friction",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"ignoreBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"clicks",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"trackingPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"cwd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"pmme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:g.Init}),Object.defineProperty(this,"isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"spinner",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"containerRect",{enumerable:!0,configurable:!0,writable:!0,value:{width:0,height:0,innerWidth:0,innerHeight:0}}),Object.defineProperty(this,"contentRect",{enumerable:!0,configurable:!0,writable:!0,value:{top:0,right:0,bottom:0,left:0,fullWidth:0,fullHeight:0,fitWidth:0,fitHeight:0,width:0,height:0}}),Object.defineProperty(this,"dragStart",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,top:0,left:0,time:0}}),Object.defineProperty(this,"dragOffset",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,time:0}}),Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},x)}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},x)}),Object.defineProperty(this,"velocity",{enumerable:!0,configurable:!0,writable:!0,value:{a:0,b:0,c:0,d:0,e:0,f:0}}),Object.defineProperty(this,"lockedAxis",{enumerable:!0,configurable:!0,writable:!0,value:!1}),!t)throw new Error("Container Element Not Found");this.container=t,this.initContent(),this.attachPlugins(Object.assign(Object.assign({},k.Plugins),i)),this.emit("init");const o=this.content;if(o.addEventListener("load",this.onLoad),o.addEventListener("error",this.onError),this.isContentLoading){if(this.option("spinner")){t.classList.add(this.cn("isLoading"));const e=n(v);!t.contains(o)||o.parentElement instanceof HTMLPictureElement?this.spinner=t.appendChild(e):this.spinner=(null===(s=o.parentElement)||void 0===s?void 0:s.insertBefore(e,o))||null}this.emit("beforeLoad")}else queueMicrotask((()=>{this.enable()}))}initContent(){const{container:t}=this,e=this.cn(M);let i=this.option(M)||t.querySelector(`.${e}`);if(i||(i=t.querySelector("img,picture")||t.firstElementChild,i&&w(i,e)),i instanceof HTMLPictureElement&&(i=i.querySelector("img")),!i)throw new Error("No content found");this.content=i}onLoad(){this.spinner&&(this.spinner.remove(),this.spinner=null),this.option("spinner")&&this.container.classList.remove(this.cn("isLoading")),this.emit("afterLoad"),this.state===g.Init?this.enable():this.updateMetrics()}onError(){this.state!==g.Destroy&&(this.spinner&&(this.spinner.remove(),this.spinner=null),this.stop(),this.detachEvents(),this.state=g.Error,this.emit("error"))}attachObserver(){var t;const e=()=>Math.abs(this.containerRect.width-this.container.getBoundingClientRect().width)>.1||Math.abs(this.containerRect.height-this.container.getBoundingClientRect().height)>.1;this.resizeObserver||void 0===window.ResizeObserver||(this.resizeObserver=new ResizeObserver((()=>{this.updateTimer||(e()?(this.onResize(),this.isMobile&&(this.updateTimer=setTimeout((()=>{e()&&this.onResize(),this.updateTimer=null}),500))):this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null))}))),null===(t=this.resizeObserver)||void 0===t||t.observe(this.container)}detachObserver(){var t;null===(t=this.resizeObserver)||void 0===t||t.disconnect()}attachEvents(){const{container:t}=this;t.addEventListener("click",this.onClick,{passive:!1,capture:!1}),t.addEventListener("wheel",this.onWheel,{passive:!1}),this.pointerTracker=new l(t,{start:this.onPointerDown,move:this.onPointerMove,end:this.onPointerUp}),document.addEventListener(P,this.onMouseMove)}detachEvents(){var t;const{container:e}=this;e.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),e.removeEventListener("wheel",this.onWheel,{passive:!1}),null===(t=this.pointerTracker)||void 0===t||t.stop(),this.pointerTracker=null,document.removeEventListener(P,this.onMouseMove),document.removeEventListener("keydown",this.onKeydown,!0),this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null),this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)}animate(){const t=this.friction;this.setTargetForce();const e=this.option("maxVelocity");for(const i of b)t?(this.velocity[i]*=1-t,e&&!this.isScaling&&(this.velocity[i]=Math.max(Math.min(this.velocity[i],e),-1*e)),this.current[i]+=this.velocity[i]):this.current[i]=this.target[i];this.setTransform(),this.setEdgeForce(),!this.isResting||this.isDragging?this.rAF=requestAnimationFrame((()=>this.animate())):this.stop("current")}setTargetForce(){for(const t of b)"e"===t&&this.isBouncingX||"f"===t&&this.isBouncingY||(this.velocity[t]=(1/(1-this.friction)-1)*(this.target[t]-this.current[t]))}checkBounds(t=0,e=0){const{current:i}=this,n=i.e+t,s=i.f+e,o=this.getBounds(),{x:r,y:a}=o,l=r.min,c=r.max,h=a.min,u=a.max;let d=0,p=0;return l!==1/0&&n<l?d=l-n:c!==1/0&&n>c&&(d=c-n),h!==1/0&&s<h?p=h-s:u!==1/0&&s>u&&(p=u-s),Math.abs(d)<.001&&(d=0),Math.abs(p)<.001&&(p=0),Object.assign(Object.assign({},o),{xDiff:d,yDiff:p,inBounds:!d&&!p})}clampTargetBounds(){const{target:t}=this,{x:e,y:i}=this.getBounds();e.min!==1/0&&(t.e=Math.max(t.e,e.min)),e.max!==1/0&&(t.e=Math.min(t.e,e.max)),i.min!==1/0&&(t.f=Math.max(t.f,i.min)),i.max!==1/0&&(t.f=Math.min(t.f,i.max))}calculateContentDim(t=this.current){const{content:e,contentRect:i}=this,{fitWidth:n,fitHeight:s,fullWidth:o,fullHeight:r}=i;let a=o,l=r;if(this.option("zoom")||0!==this.angle){const i=!(e instanceof HTMLImageElement||"none"!==window.getComputedStyle(e).maxWidth&&"none"!==window.getComputedStyle(e).maxHeight),c=i?o:n,h=i?r:s,u=this.getMatrix(t),d=new DOMPoint(0,0).matrixTransform(u),p=new DOMPoint(0+c,0).matrixTransform(u),f=new DOMPoint(0+c,0+h).matrixTransform(u),m=new DOMPoint(0,0+h).matrixTransform(u),g=Math.abs(f.x-d.x),b=Math.abs(f.y-d.y),v=Math.abs(m.x-p.x),y=Math.abs(m.y-p.y);a=Math.max(g,v),l=Math.max(b,y)}return{contentWidth:a,contentHeight:l}}setEdgeForce(){if(this.ignoreBounds||this.isDragging||this.panMode===P||this.targetScale<this.scale)return this.isBouncingX=!1,void(this.isBouncingY=!1);const{target:t}=this,{x:e,y:i,xDiff:n,yDiff:s}=this.checkBounds(),o=this.option("maxVelocity");let r=this.velocity.e,a=this.velocity.f;0!==n?(this.isBouncingX=!0,n*r<=0?r+=.14*n:(r=.14*n,e.min!==1/0&&(this.target.e=Math.max(t.e,e.min)),e.max!==1/0&&(this.target.e=Math.min(t.e,e.max))),o&&(r=Math.max(Math.min(r,o),-1*o))):this.isBouncingX=!1,0!==s?(this.isBouncingY=!0,s*a<=0?a+=.14*s:(a=.14*s,i.min!==1/0&&(this.target.f=Math.max(t.f,i.min)),i.max!==1/0&&(this.target.f=Math.min(t.f,i.max))),o&&(a=Math.max(Math.min(a,o),-1*o))):this.isBouncingY=!1,this.isBouncingX&&(this.velocity.e=r),this.isBouncingY&&(this.velocity.f=a)}enable(){const{content:t}=this,e=new DOMMatrixReadOnly(window.getComputedStyle(t).transform);for(const t of b)this.current[t]=this.target[t]=e[t];this.updateMetrics(),this.attachObserver(),this.attachEvents(),this.state=g.Ready,this.emit("ready")}onClick(t){var e;this.isDragging&&(null===(e=this.pointerTracker)||void 0===e||e.clear(),this.trackingPoints=[],this.startDecelAnim());const i=t.target;if(!i||t.defaultPrevented)return;if(i&&i.hasAttribute("disabled"))return t.preventDefault(),void t.stopPropagation();if((()=>{const t=window.getSelection();return t&&"Range"===t.type})()&&!i.closest("button"))return;const n=i.closest("[data-panzoom-action]"),s=i.closest("[data-panzoom-change]"),o=n||s,r=o&&y(o)?o.dataset:null;if(r){const e=r.panzoomChange,i=r.panzoomAction;if((e||i)&&t.preventDefault(),e){let i={};try{i=JSON.parse(e)}catch(t){console&&console.warn("The given data was not valid JSON")}return void this.applyChange(i)}if(i)return void(this[i]&&this[i]())}if(Math.abs(this.dragOffset.x)>3||Math.abs(this.dragOffset.y)>3)return t.preventDefault(),void t.stopPropagation();const a=this.content.getBoundingClientRect();if(this.dragStart.time&&!this.canZoomOut()&&(Math.abs(a.x-this.dragStart.x)>2||Math.abs(a.y-this.dragStart.y)>2))return;this.dragStart.time=0;const l=e=>{this.option("zoom")&&e&&"string"==typeof e&&/(iterateZoom)|(toggle(Zoom|Full|Cover|Max)|(zoomTo(Fit|Cover|Max)))/.test(e)&&"function"==typeof this[e]&&(t.preventDefault(),this[e]({event:t}))},c=this.option("click",t),h=this.option("dblClick",t);h?(this.clicks++,1==this.clicks&&(this.clickTimer=setTimeout((()=>{1===this.clicks?(this.emit("click",t),!t.defaultPrevented&&c&&l(c)):(this.emit("dblClick",t),t.defaultPrevented||l(h)),this.clicks=0,this.clickTimer=null}),350))):(this.emit("click",t),!t.defaultPrevented&&c&&l(c))}addTrackingPoint(t){const e=this.trackingPoints.filter((t=>t.time>Date.now()-100));e.push(t),this.trackingPoints=e}onPointerDown(t,e,i){var n;if(!1===this.option("touch",t))return!1;this.pwt=0,this.dragOffset={x:0,y:0,time:0},this.trackingPoints=[];const s=this.content.getBoundingClientRect();if(this.dragStart={x:s.x,y:s.y,top:s.top,left:s.left,time:Date.now()},this.clickTimer)return!1;if(this.panMode===P&&this.targetScale>1)return t.preventDefault(),t.stopPropagation(),!1;const o=t.composedPath()[0];if(!i.length){if(["TEXTAREA","OPTION","INPUT","SELECT","VIDEO","IFRAME"].includes(o.nodeName)||o.closest("[contenteditable]")||o.closest("[data-selectable]")||o.closest("[data-draggable]")||o.closest("[data-clickable]")||o.closest("[data-panzoom-change]")||o.closest("[data-panzoom-action]"))return!1;null===(n=window.getSelection())||void 0===n||n.removeAllRanges()}if("mousedown"===t.type)["A","BUTTON"].includes(o.nodeName)||t.preventDefault();else if(Math.abs(this.velocity.a)>.3)return!1;return this.target.e=this.current.e,this.target.f=this.current.f,this.stop(),this.isDragging||(this.isDragging=!0,this.addTrackingPoint(e),this.emit("touchStart",t)),!0}onPointerMove(i,n,s){if(!1===this.option("touch",i))return;if(!this.isDragging)return;if(n.length<2&&this.panOnlyZoomed&&t(this.targetScale)<=t(this.minScale))return;if(this.emit("touchMove",i),i.defaultPrevented)return;this.addTrackingPoint(n[0]);const{content:o}=this,r=h(s[0],s[1]),a=h(n[0],n[1]);let l=0,u=0;if(n.length>1){const t=o.getBoundingClientRect();l=r.clientX-t.left-.5*t.width,u=r.clientY-t.top-.5*t.height}const d=c(s[0],s[1]),p=c(n[0],n[1]);let f=d?p/d:1,m=a.clientX-r.clientX,g=a.clientY-r.clientY;this.dragOffset.x+=m,this.dragOffset.y+=g,this.dragOffset.time=Date.now()-this.dragStart.time;let b=t(this.targetScale)===t(this.minScale)&&this.option("lockAxis");if(b&&!this.lockedAxis)if("xy"===b||"y"===b||"touchmove"===i.type){if(Math.abs(this.dragOffset.x)<6&&Math.abs(this.dragOffset.y)<6)return void i.preventDefault();const t=Math.abs(180*Math.atan2(this.dragOffset.y,this.dragOffset.x)/Math.PI);this.lockedAxis=t>45&&t<135?"y":"x",this.dragOffset.x=0,this.dragOffset.y=0,m=0,g=0}else this.lockedAxis=b;if(e(i.target,this.content)&&(b="x",this.dragOffset.y=0),b&&"xy"!==b&&this.lockedAxis!==b&&t(this.targetScale)===t(this.minScale))return;i.cancelable&&i.preventDefault(),this.container.classList.add(this.cn("isDragging"));const v=this.checkBounds(m,g);this.option("rubberband")?("x"!==this.isInfinite&&(v.xDiff>0&&m<0||v.xDiff<0&&m>0)&&(m*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitWidth*v.xDiff))),"y"!==this.isInfinite&&(v.yDiff>0&&g<0||v.yDiff<0&&g>0)&&(g*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitHeight*v.yDiff)))):(v.xDiff&&(m=0),v.yDiff&&(g=0));const y=this.targetScale,S=this.minScale,w=this.maxScale;y<.5*S&&(f=Math.max(f,S)),y>1.5*w&&(f=Math.min(f,w)),"y"===this.lockedAxis&&t(y)===t(S)&&(m=0),"x"===this.lockedAxis&&t(y)===t(S)&&(g=0),this.applyChange({originX:l,originY:u,panX:m,panY:g,scale:f,friction:this.option("dragFriction"),ignoreBounds:!0})}onPointerUp(t,i,n){if(n.length)return this.dragOffset.x=0,this.dragOffset.y=0,void(this.trackingPoints=[]);this.container.classList.remove(this.cn("isDragging")),this.isDragging&&(this.addTrackingPoint(i),this.panOnlyZoomed&&this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1&&(this.trackingPoints=[]),e(t.target,this.content)&&"y"===this.lockedAxis&&(this.trackingPoints=[]),this.emit("touchEnd",t),this.isDragging=!1,this.lockedAxis=!1,this.state!==g.Destroy&&(t.defaultPrevented||this.startDecelAnim()))}startDecelAnim(){var e;const i=this.isScaling;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const t of b)this.velocity[t]=0;this.target.e=this.current.e,this.target.f=this.current.f,S(this.container,"is-scaling"),S(this.container,"is-animating"),this.isTicking=!1;const{trackingPoints:n}=this,s=n[0],o=n[n.length-1];let r=0,a=0,l=0;o&&s&&(r=o.clientX-s.clientX,a=o.clientY-s.clientY,l=o.time-s.time);const c=(null===(e=window.visualViewport)||void 0===e?void 0:e.scale)||1;1!==c&&(r*=c,a*=c);let h=0,u=0,d=0,p=0,f=this.option("decelFriction");const m=this.targetScale;if(l>0){d=Math.abs(r)>3?r/(l/30):0,p=Math.abs(a)>3?a/(l/30):0;const t=this.option("maxVelocity");t&&(d=Math.max(Math.min(d,t),-1*t),p=Math.max(Math.min(p,t),-1*t))}d&&(h=d/(1/(1-f)-1)),p&&(u=p/(1/(1-f)-1)),("y"===this.option("lockAxis")||"xy"===this.option("lockAxis")&&"y"===this.lockedAxis&&t(m)===this.minScale)&&(h=d=0),("x"===this.option("lockAxis")||"xy"===this.option("lockAxis")&&"x"===this.lockedAxis&&t(m)===this.minScale)&&(u=p=0);const g=this.dragOffset.x,v=this.dragOffset.y,y=this.option("dragMinThreshold")||0;Math.abs(g)<y&&Math.abs(v)<y&&(h=u=0,d=p=0),(m<this.minScale-1e-5||m>this.maxScale+1e-5||i&&!h&&!u)&&(f=.35),this.applyChange({panX:h,panY:u,friction:f}),this.emit("decel",d,p,g,v)}onWheel(t){var e=[-t.deltaX||0,-t.deltaY||0,-t.detail||0].reduce((function(t,e){return Math.abs(e)>Math.abs(t)?e:t}));const i=Math.max(-1,Math.min(1,e));if(this.emit("wheel",t,i),this.panMode===P)return;if(t.defaultPrevented)return;const n=this.option("wheel");"pan"===n?(t.preventDefault(),this.panOnlyZoomed&&!this.canZoomOut()||this.applyChange({panX:2*-t.deltaX,panY:2*-t.deltaY,bounce:!1})):"zoom"===n&&!1!==this.option("zoom")&&this.zoomWithWheel(t)}onMouseMove(t){this.panWithMouse(t)}onKeydown(t){"Escape"===t.key&&this.toggleFS()}onResize(){this.updateMetrics(),this.checkBounds().inBounds||this.requestTick()}setTransform(){this.emit("beforeTransform");const{current:e,target:i,content:n,contentRect:s}=this,o=Object.assign({},x);for(const n of b){const s="e"==n||"f"===n?E:1e5;o[n]=t(e[n],s),Math.abs(i[n]-e[n])<("e"==n||"f"===n?.51:.001)&&(e[n]=i[n])}let{a:r,b:a,c:l,d:c,e:h,f:u}=o,d=`matrix(${r}, ${a}, ${l}, ${c}, ${h}, ${u})`,p=n.parentElement instanceof HTMLPictureElement?n.parentElement:n;if(this.option("transformParent")&&(p=p.parentElement||p),p.style.transform===d)return;p.style.transform=d;const{contentWidth:f,contentHeight:m}=this.calculateContentDim();s.width=f,s.height=m,this.emit("afterTransform")}updateMetrics(e=!1){var i;if(!this||this.state===g.Destroy)return;if(this.isContentLoading)return;const n=Math.max(1,(null===(i=window.visualViewport)||void 0===i?void 0:i.scale)||1),{container:s,content:o}=this,r=o instanceof HTMLImageElement,a=s.getBoundingClientRect(),l=getComputedStyle(this.container);let c=a.width*n,h=a.height*n;const u=parseFloat(l.paddingTop)+parseFloat(l.paddingBottom),d=c-(parseFloat(l.paddingLeft)+parseFloat(l.paddingRight)),p=h-u;this.containerRect={width:c,height:h,innerWidth:d,innerHeight:p};let f=this.option("width")||"auto",m=this.option("height")||"auto";"auto"===f&&(f=parseFloat(o.dataset.width||"")||(t=>{let e=0;return e=t instanceof HTMLImageElement?t.naturalWidth:t instanceof SVGElement?t.width.baseVal.value:Math.max(t.offsetWidth,t.scrollWidth),e||0})(o)),"auto"===m&&(m=parseFloat(o.dataset.height||"")||(t=>{let e=0;return e=t instanceof HTMLImageElement?t.naturalHeight:t instanceof SVGElement?t.height.baseVal.value:Math.max(t.offsetHeight,t.scrollHeight),e||0})(o));let b=o.parentElement instanceof HTMLPictureElement?o.parentElement:o;this.option("transformParent")&&(b=b.parentElement||b);const v=b.getAttribute("style")||"";b.style.setProperty("transform","none","important"),r&&(b.style.width="",b.style.height=""),b.offsetHeight;const y=o.getBoundingClientRect();let S=y.width*n,w=y.height*n,x=0,E=0;r&&(Math.abs(f-S)>1||Math.abs(m-w)>1)&&({width:S,height:w,top:x,left:E}=((t,e,i,n)=>{const s=i/n;return s>t/e?(i=t,n=t/s):(i=e*s,n=e),{width:i,height:n,top:.5*(e-n),left:.5*(t-i)}})(S,w,f,m)),this.contentRect=Object.assign(Object.assign({},this.contentRect),{top:y.top-a.top+x,bottom:a.bottom-y.bottom+x,left:y.left-a.left+E,right:a.right-y.right+E,fitWidth:S,fitHeight:w,width:S,height:w,fullWidth:f,fullHeight:m}),b.style.cssText=v,r&&(b.style.width=`${S}px`,b.style.height=`${w}px`),this.setTransform(),!0!==e&&this.emit("refresh"),this.ignoreBounds||(t(this.targetScale)<t(this.minScale)?this.zoomTo(this.minScale,{friction:0}):this.targetScale>this.maxScale?this.zoomTo(this.maxScale,{friction:0}):this.state===g.Init||this.checkBounds().inBounds||this.requestTick()),this.updateControls()}getBounds(){const e=this.option("bounds");if("auto"!==e)return e;const{contentWidth:i,contentHeight:n}=this.calculateContentDim(this.target);let s=0,o=0,r=0,a=0;const l=this.option("infinite");if(!0===l||this.lockedAxis&&l===this.lockedAxis)s=-1/0,r=1/0,o=-1/0,a=1/0;else{let{containerRect:e,contentRect:l}=this,c=t(this.contentRect.fitWidth*this.targetScale,E),h=t(this.contentRect.fitHeight*this.targetScale,E),{innerWidth:u,innerHeight:d}=e;if(this.containerRect.width===c&&(u=e.width),this.containerRect.width===h&&(d=e.height),i>u){r=.5*(i-u),s=-1*r;let t=.5*(l.right-l.left);s+=t,r+=t}if(this.contentRect.fitWidth>u&&i<u&&(s-=.5*(this.contentRect.fitWidth-u),r-=.5*(this.contentRect.fitWidth-u)),n>d){a=.5*(n-d),o=-1*a;let t=.5*(l.bottom-l.top);o+=t,a+=t}this.contentRect.fitHeight>d&&n<d&&(s-=.5*(this.contentRect.fitHeight-d),r-=.5*(this.contentRect.fitHeight-d))}return{x:{min:s,max:r},y:{min:o,max:a}}}updateControls(){const e=this,i=e.container,{panMode:n,contentRect:s,fullScale:r,targetScale:a,coverScale:l,maxScale:c,minScale:h}=e;let u={toggleMax:a-h<.5*(c-h)?c:h,toggleCover:a-h<.5*(l-h)?l:h,toggleZoom:a-h<.5*(r-h)?r:h}[e.option("click")||""]||h,d=e.canZoomIn(),p=e.canZoomOut(),f=n===O&&!!this.option("touch"),m=p&&f;f&&(t(a)<t(h)&&!this.panOnlyZoomed&&(m=!0),(t(s.width,1)>t(s.fitWidth,1)||t(s.height,1)>t(s.fitHeight,1))&&(m=!0)),t(s.width*a,1)<t(s.fitWidth,1)&&(m=!1),n===P&&(m=!1);let g=d&&t(u)>t(a),b=!g&&!m&&p&&t(u)<t(a);o(i,this.cn("canZoomIn"),g),o(i,this.cn("canZoomOut"),b),o(i,this.cn("isDraggable"),m);for(const t of i.querySelectorAll('[data-panzoom-action="zoomIn"]'))d?(t.removeAttribute("disabled"),t.removeAttribute("tabindex")):(t.setAttribute("disabled",""),t.setAttribute("tabindex","-1"));for(const t of i.querySelectorAll('[data-panzoom-action="zoomOut"]'))p?(t.removeAttribute("disabled"),t.removeAttribute("tabindex")):(t.setAttribute("disabled",""),t.setAttribute("tabindex","-1"));for(const t of i.querySelectorAll('[data-panzoom-action="toggleZoom"],[data-panzoom-action="iterateZoom"]')){d||p?(t.removeAttribute("disabled"),t.removeAttribute("tabindex")):(t.setAttribute("disabled",""),t.setAttribute("tabindex","-1"));const e=t.querySelector("g");e&&(e.style.display=d?"":"none")}}panTo({x:t=this.target.e,y:e=this.target.f,scale:i=this.targetScale,friction:n=this.option("friction"),angle:s=0,originX:o=0,originY:r=0,flipX:a=!1,flipY:l=!1,ignoreBounds:c=!1}){this.state!==g.Destroy&&this.applyChange({panX:t-this.target.e,panY:e-this.target.f,scale:i/this.targetScale,angle:s,originX:o,originY:r,friction:n,flipX:a,flipY:l,ignoreBounds:c})}applyChange({panX:e=0,panY:i=0,scale:n=1,angle:s=0,originX:o=-this.current.e,originY:r=-this.current.f,friction:a=this.option("friction"),flipX:l=!1,flipY:c=!1,ignoreBounds:h=!1,bounce:u=this.option("bounce")}){if(this.state===g.Destroy)return;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.friction=a||0,this.ignoreBounds=h;const{current:d}=this,p=d.e,f=d.f,m=this.getMatrix(this.target);let v=(new DOMMatrix).translate(p,f).translate(o,r).translate(e,i);if(this.option("zoom")){if(!h){const t=this.targetScale,e=this.minScale,i=this.maxScale;t*n<e&&(n=e/t),t*n>i&&(n=i/t)}v=v.scale(n)}v=v.translate(-o,-r).translate(-p,-f).multiply(m),s&&(v=v.rotate(s)),l&&(v=v.scale(-1,1)),c&&(v=v.scale(1,-1));for(const e of b)"e"!==e&&"f"!==e&&(v[e]>this.minScale+1e-5||v[e]<this.minScale-1e-5)?this.target[e]=v[e]:this.target[e]=t(v[e],E);(this.targetScale<this.scale||Math.abs(n-1)>.1||this.panMode===P||!1===u)&&!h&&this.clampTargetBounds(),this.isResting||(this.state=g.Panning,this.requestTick())}stop(t=!1){if(this.state===g.Init||this.state===g.Destroy)return;const e=this.isTicking;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const e of b)this.velocity[e]=0,"current"===t?this.current[e]=this.target[e]:"target"===t&&(this.target[e]=this.current[e]);this.setTransform(),S(this.container,"is-scaling"),S(this.container,"is-animating"),this.isTicking=!1,this.state=g.Ready,e&&(this.emit("endAnimation"),this.updateControls())}requestTick(){this.isTicking||(this.emit("startAnimation"),this.updateControls(),w(this.container,"is-animating"),this.isScaling&&w(this.container,"is-scaling")),this.isTicking=!0,this.rAF||(this.rAF=requestAnimationFrame((()=>this.animate())))}panWithMouse(e,i=this.option("mouseMoveFriction")){if(this.pmme=e,this.panMode!==P||!e)return;if(t(this.targetScale)<=t(this.minScale))return;this.emit("mouseMove",e);const{container:n,containerRect:s,contentRect:o}=this,r=s.width,a=s.height,l=n.getBoundingClientRect(),c=(e.clientX||0)-l.left,h=(e.clientY||0)-l.top;let{contentWidth:u,contentHeight:d}=this.calculateContentDim(this.target);const p=this.option("mouseMoveFactor");p>1&&(u!==r&&(u*=p),d!==a&&(d*=p));let f=.5*(u-r)-c/r*100/100*(u-r);f+=.5*(o.right-o.left);let m=.5*(d-a)-h/a*100/100*(d-a);m+=.5*(o.bottom-o.top),this.applyChange({panX:f-this.target.e,panY:m-this.target.f,friction:i})}zoomWithWheel(e){if(this.state===g.Destroy||this.state===g.Init)return;const i=Date.now();if(i-this.pwt<45)return void e.preventDefault();this.pwt=i;var n=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce((function(t,e){return Math.abs(e)>Math.abs(t)?e:t}));const s=Math.max(-1,Math.min(1,n)),{targetScale:o,maxScale:r,minScale:a}=this;let l=o*(100+45*s)/100;t(l)<t(a)&&t(o)<=t(a)?(this.cwd+=Math.abs(s),l=a):t(l)>t(r)&&t(o)>=t(r)?(this.cwd+=Math.abs(s),l=r):(this.cwd=0,l=Math.max(Math.min(l,r),a)),this.cwd>this.option("wheelLimit")||(e.preventDefault(),t(l)!==t(o)&&this.zoomTo(l,{event:e}))}canZoomIn(){return this.option("zoom")&&(t(this.contentRect.width,1)<t(this.contentRect.fitWidth,1)||t(this.targetScale)<t(this.maxScale))}canZoomOut(){return this.option("zoom")&&t(this.targetScale)>t(this.minScale)}zoomIn(t=1.25,e){this.zoomTo(this.targetScale*t,e)}zoomOut(t=.8,e){this.zoomTo(this.targetScale*t,e)}zoomToFit(t){this.zoomTo("fit",t)}zoomToCover(t){this.zoomTo("cover",t)}zoomToFull(t){this.zoomTo("full",t)}zoomToMax(t){this.zoomTo("max",t)}toggleZoom(t){this.zoomTo(this.targetScale-this.minScale<.5*(this.fullScale-this.minScale)?"full":"fit",t)}toggleMax(t){this.zoomTo(this.targetScale-this.minScale<.5*(this.maxScale-this.minScale)?"max":"fit",t)}toggleCover(t){this.zoomTo(this.targetScale-this.minScale<.5*(this.coverScale-this.minScale)?"cover":"fit",t)}iterateZoom(t){this.zoomTo("next",t)}zoomTo(t=1,{friction:e="auto",originX:i="auto",originY:n="auto",event:s}={}){if(this.isContentLoading||this.state===g.Destroy)return;const{targetScale:o}=this;this.stop();let r=1;if(this.panMode===P&&(s=this.pmme||s),s||"auto"===i||"auto"===n){const t=this.content.getBoundingClientRect(),e=this.container.getBoundingClientRect(),o=s?s.clientX:e.left+.5*e.width,r=s?s.clientY:e.top+.5*e.height;i=o-t.left-.5*t.width,n=r-t.top-.5*t.height}const a=this.fullScale,l=this.maxScale;let c=this.coverScale;"number"==typeof t?r=t/o:("next"===t&&(a-c<.2&&(c=a),t=o<a-1e-5?"full":o<l-1e-5?"max":"fit"),r="full"===t?a/o||1:"cover"===t?c/o||1:"max"===t?l/o||1:1/o||1),e="auto"===e?r>1?.15:.25:e,this.applyChange({scale:r,originX:i,originY:n,friction:e}),s&&this.panMode===P&&this.panWithMouse(s,e)}rotateCCW(){this.applyChange({angle:-90})}rotateCW(){this.applyChange({angle:90})}flipX(){this.applyChange({flipX:!0})}flipY(){this.applyChange({flipY:!0})}fitX(){this.stop("target");const{containerRect:t,contentRect:e,target:i}=this;this.applyChange({panX:.5*t.width-(e.left+.5*e.fitWidth)-i.e,panY:.5*t.height-(e.top+.5*e.fitHeight)-i.f,scale:t.width/e.fitWidth/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}fitY(){this.stop("target");const{containerRect:t,contentRect:e,target:i}=this;this.applyChange({panX:.5*t.width-(e.left+.5*e.fitWidth)-i.e,panY:.5*t.innerHeight-(e.top+.5*e.fitHeight)-i.f,scale:t.height/e.fitHeight/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}toggleFS(){const{container:t}=this,e=this.cn("inFullscreen"),i=this.cn("htmlHasFullscreen");t.classList.toggle(e);const n=t.classList.contains(e);n?(document.documentElement.classList.add(i),document.addEventListener("keydown",this.onKeydown,!0)):(document.documentElement.classList.remove(i),document.removeEventListener("keydown",this.onKeydown,!0)),this.updateMetrics(),this.emit(n?"enterFS":"exitFS")}getMatrix(t=this.current){const{a:e,b:i,c:n,d:s,e:o,f:r}=t;return new DOMMatrix([e,i,n,s,o,r])}reset(t){if(this.state!==g.Init&&this.state!==g.Destroy){this.stop("current");for(const t of b)this.target[t]=x[t];this.target.a=this.minScale,this.target.d=this.minScale,this.clampTargetBounds(),this.isResting||(this.friction=void 0===t?this.option("friction"):t,this.state=g.Panning,this.requestTick())}}destroy(){this.stop(),this.state=g.Destroy,this.detachEvents(),this.detachObserver();const{container:t,content:e}=this,i=this.option("classes")||{};for(const e of Object.values(i))t.classList.remove(e+"");e&&(e.removeEventListener("load",this.onLoad),e.removeEventListener("error",this.onError)),this.detachPlugins()}}Object.defineProperty(k,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{content:null,width:"auto",height:"auto",panMode:"drag",touch:!0,dragMinThreshold:3,lockAxis:!1,mouseMoveFactor:1,mouseMoveFriction:.12,zoom:!0,pinchToZoom:!0,panOnlyZoomed:"auto",minScale:1,maxScale:2,friction:.25,dragFriction:.35,decelFriction:.05,click:"toggleZoom",dblClick:!1,wheel:"zoom",wheelLimit:7,spinner:!0,bounds:"auto",infinite:!1,rubberband:!0,bounce:!0,maxVelocity:75,transformParent:!1,classes:{content:"f-panzoom__content",isLoading:"is-loading",canZoomIn:"can-zoom_in",canZoomOut:"can-zoom_out",isDraggable:"is-draggable",isDragging:"is-dragging",inFullscreen:"in-fullscreen",htmlHasFullscreen:"with-panzoom-in-fullscreen"},l10n:{PANUP:"Move up",PANDOWN:"Move down",PANLEFT:"Move left",PANRIGHT:"Move right",ZOOMIN:"Zoom in",ZOOMOUT:"Zoom out",TOGGLEZOOM:"Toggle zoom level",TOGGLE1TO1:"Toggle zoom level",ITERATEZOOM:"Toggle zoom level",ROTATECCW:"Rotate counterclockwise",ROTATECW:"Rotate clockwise",FLIPX:"Flip horizontally",FLIPY:"Flip vertically",FITX:"Fit horizontally",FITY:"Fit vertically",RESET:"Reset",TOGGLEFS:"Toggle fullscreen"}}}),Object.defineProperty(k,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}});const A=function(t,e){let i=!0;return(...n)=>{i&&(i=!1,t(...n),setTimeout((()=>{i=!0}),e))}},C=(t,e)=>{let i=[];return t.childNodes.forEach((t=>{t.nodeType!==Node.ELEMENT_NODE||e&&!t.matches(e)||i.push(t)})),i};var j;!function(t){t[t.Init=0]="Init",t[t.Ready=1]="Ready",t[t.Destroy=2]="Destroy"}(j||(j={}));const z=t=>{if("string"==typeof t||t instanceof HTMLElement)t={html:t};else{const e=t.thumb;void 0!==e&&("string"==typeof e&&(t.thumbSrc=e),e instanceof HTMLImageElement&&(t.thumbEl=e,t.thumbElSrc=e.src,t.thumbSrc=e.src),delete t.thumb)}return Object.assign({html:"",el:null,isDom:!1,class:"",customClass:"",index:-1,dim:0,gap:0,pos:0,transition:!1},t)},D=(t={})=>Object.assign({index:-1,slides:[],dim:0,pos:-1},t);class R extends f{constructor(t,e){super(e),Object.defineProperty(this,"instance",{enumerable:!0,configurable:!0,writable:!0,value:t})}attach(){}detach(){}}class N extends R{constructor(){super(...arguments),Object.defineProperty(this,"isDynamic",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"list",{enumerable:!0,configurable:!0,writable:!0,value:null})}onRefresh(){this.refresh()}build(){let t=this.list;return t||(t=document.createElement("ul"),w(t,this.cn("list")),t.setAttribute("role","tablist"),this.instance.container.appendChild(t),w(this.instance.container,this.cn("hasDots")),this.list=t),t}refresh(){var t;const e=this.instance.pages.length,i=Math.min(2,this.option("minCount")),n=Math.max(2e3,this.option("maxCount")),s=this.option("dynamicFrom");if(e<i||e>n)return void this.cleanup();const r="number"==typeof s&&e>5&&e>=s,a=!this.list||this.isDynamic!==r||this.list.children.length!==e;a&&this.cleanup();const l=this.build();if(o(l,this.cn("isDynamic"),!!r),a)for(let t=0;t<e;t++)l.append(this.createItem(t));let c,h=0;for(const e of[...l.children]){const i=h===this.instance.page;i&&(c=e),o(e,this.cn("isCurrent"),i),null===(t=e.children[0])||void 0===t||t.setAttribute("aria-selected",i?"true":"false");for(const t of["isBeforePrev","isPrev","isNext","isAfterNext"])S(e,this.cn(t));h++}if(c=c||l.firstChild,r&&c){const t=c.previousElementSibling,e=t&&t.previousElementSibling;w(t,this.cn("isPrev")),w(e,this.cn("isBeforePrev"));const i=c.nextElementSibling,n=i&&i.nextElementSibling;w(i,this.cn("isNext")),w(n,this.cn("isAfterNext"))}this.isDynamic=r}createItem(t=0){var e;const i=document.createElement("li");i.setAttribute("role","presentation");const s=n(this.instance.localize(this.option("dotTpl"),[["%d",t+1]]).replace(/\%i/g,t+""));return i.appendChild(s),null===(e=i.children[0])||void 0===e||e.setAttribute("role","tab"),i}cleanup(){this.list&&(this.list.remove(),this.list=null),this.isDynamic=!1,S(this.instance.container,this.cn("hasDots"))}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}Object.defineProperty(N,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{list:"f-carousel__dots",isDynamic:"is-dynamic",hasDots:"has-dots",dot:"f-carousel__dot",isBeforePrev:"is-before-prev",isPrev:"is-prev",isCurrent:"is-current",isNext:"is-next",isAfterNext:"is-after-next"},dotTpl:'<button type="button" data-carousel-page="%i" aria-label="{{GOTO}}"><span class="f-carousel__dot" aria-hidden="true"></span></button>',dynamicFrom:11,maxCount:1/0,minCount:2}});const H="disabled",I="next",F="prev";class _ extends R{constructor(){super(...arguments),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prev",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"next",{enumerable:!0,configurable:!0,writable:!0,value:null})}onRefresh(){const t=this.instance,e=t.pages.length,i=t.page;if(e<2)return void this.cleanup();this.build();let n=this.prev,s=this.next;n&&s&&(n.removeAttribute(H),s.removeAttribute(H),t.isInfinite||(i<=0&&n.setAttribute(H,""),i>=e-1&&s.setAttribute(H,"")))}createButton(t){const e=this.instance,i=document.createElement("button");i.setAttribute("tabindex","0"),i.setAttribute("title",e.localize(`{{${t.toUpperCase()}}}`)),w(i,this.cn("button")+" "+this.cn(t===I?"isNext":"isPrev"));const n=e.isRTL?t===I?F:I:t;var s;return i.innerHTML=e.localize(this.option(`${n}Tpl`)),i.dataset[`carousel${s=t,s?s.match("^[a-z]")?s.charAt(0).toUpperCase()+s.substring(1):s:""}`]="true",i}build(){let t=this.container;t||(this.container=t=document.createElement("div"),w(t,this.cn("container")),this.instance.container.appendChild(t)),this.next||(this.next=t.appendChild(this.createButton(I))),this.prev||(this.prev=t.appendChild(this.createButton(F)))}cleanup(){this.prev&&this.prev.remove(),this.next&&this.next.remove(),this.container&&this.container.remove(),this.prev=null,this.next=null,this.container=null}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}Object.defineProperty(_,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{container:"f-carousel__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"},nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>'}});class q extends R{constructor(){super(...arguments),Object.defineProperty(this,"selectedIndex",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"nav",{enumerable:!0,configurable:!0,writable:!0,value:null})}addAsTargetFor(t){this.target=this.instance,this.nav=t,this.attachEvents()}addAsNavFor(t){this.nav=this.instance,this.target=t,this.attachEvents()}attachEvents(){this.nav&&this.target&&(this.nav.options.initialSlide=this.target.options.initialPage,this.nav.on("ready",this.onNavReady),this.nav.state===j.Ready&&this.onNavReady(this.nav),this.target.on("ready",this.onTargetReady),this.target.state===j.Ready&&this.onTargetReady(this.target))}onNavReady(t){t.on("createSlide",this.onNavCreateSlide),t.on("Panzoom.click",this.onNavClick),t.on("Panzoom.touchEnd",this.onNavTouch),this.onTargetChange()}onTargetReady(t){t.on("change",this.onTargetChange),t.on("Panzoom.refresh",this.onTargetChange),this.onTargetChange()}onNavClick(t,e,i){this.onNavTouch(t,t.panzoom,i)}onNavTouch(t,e,i){var n,s;if(Math.abs(e.dragOffset.x)>3||Math.abs(e.dragOffset.y)>3)return;const o=i.target,{nav:r,target:a}=this;if(!r||!a||!o)return;const l=o.closest("[data-index]");if(i.stopPropagation(),i.preventDefault(),!l)return;const c=parseInt(l.dataset.index||"",10)||0,h=a.getPageForSlide(c),u=r.getPageForSlide(c);r.slideTo(u),a.slideTo(h,{friction:(null===(s=null===(n=this.nav)||void 0===n?void 0:n.plugins)||void 0===s?void 0:s.Sync.option("friction"))||0}),this.markSelectedSlide(c)}onNavCreateSlide(t,e){e.index===this.selectedIndex&&this.markSelectedSlide(e.index)}onTargetChange(){const{target:t,nav:e}=this;if(!t||!e)return;if(e.state!==j.Ready||t.state!==j.Ready)return;const i=t.pages[t.page].slides[0].index,n=e.getPageForSlide(i);this.markSelectedSlide(i),e.slideTo(n)}markSelectedSlide(t){const e=this.nav;e&&e.state===j.Ready&&(this.selectedIndex=t,[...e.slides].map((e=>{e.el&&e.el.classList[e.index===t?"add":"remove"]("is-nav-selected")})))}attach(){const t=this;let e=t.options.target,i=t.options.nav;e?t.addAsNavFor(e):i&&t.addAsTargetFor(i)}detach(){const t=this,e=t.nav,i=t.target;e&&(e.off("ready",t.onNavReady),e.off("createSlide",t.onNavCreateSlide),e.off("Panzoom.click",t.onNavClick),e.off("Panzoom.touchEnd",t.onNavTouch)),t.nav=null,i&&(i.off("ready",t.onTargetReady),i.off("refresh",t.onTargetChange),i.off("change",t.onTargetChange)),t.target=null}}Object.defineProperty(q,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{friction:.35}});const B={Navigation:_,Dots:N,Sync:q};class V extends m{get axis(){return this.isHorizontal?"e":"f"}get isEnabled(){return this.state===j.Ready}get isInfinite(){let t=!1;const{contentDim:e,viewportDim:i,pages:n,slides:s}=this;return n.length>=2&&e+s[0].dim>=i&&(t=this.option("infinite")),t}get isRTL(){return"rtl"===this.option("direction")}get isHorizontal(){return"x"===this.option("axis")}constructor(t,e={},i={}){if(super(),Object.defineProperty(this,"userOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"bp",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"lp",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:j.Init}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"prevPage",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"viewport",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"slides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"panzoom",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"inTransition",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"contentDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"viewportDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),"string"==typeof t&&(t=document.querySelector(t)),!t||!y(t))throw new Error("No Element found");this.container=t,this.slideNext=A(this.slideNext.bind(this),150),this.slidePrev=A(this.slidePrev.bind(this),150),this.userOptions=e,this.userPlugins=i,queueMicrotask((()=>{this.processOptions()}))}processOptions(){const t=d({},V.defaults,this.userOptions);let e="";const i=t.breakpoints;if(i&&u(i))for(const[n,s]of Object.entries(i))window.matchMedia(n).matches&&u(s)&&(e+=n,d(t,s));e===this.bp&&this.state!==j.Init||(this.bp=e,this.state===j.Ready&&(t.initialSlide=this.pages[this.page].slides[0].index),this.state!==j.Init&&this.destroy(),super.setOptions(t),!1===this.option("enabled")?this.attachEvents():setTimeout((()=>{this.init()}),0))}init(){this.state=j.Init,this.emit("init"),this.attachPlugins(Object.assign(Object.assign({},V.Plugins),this.userPlugins)),this.initLayout(),this.initSlides(),this.updateMetrics(),this.setInitialPosition(),this.initPanzoom(),this.attachEvents(),this.state=j.Ready,this.emit("ready")}initLayout(){const{container:t}=this,e=this.option("classes");w(t,this.cn("container")),o(t,e.isLTR,!this.isRTL),o(t,e.isRTL,this.isRTL),o(t,e.isVertical,!this.isHorizontal),o(t,e.isHorizontal,this.isHorizontal);let i=this.option("viewport")||t.querySelector(`.${e.viewport}`);i||(i=document.createElement("div"),w(i,e.viewport),i.append(...C(t,`.${e.slide}`)),t.prepend(i));let n=this.option("track")||t.querySelector(`.${e.track}`);n||(n=document.createElement("div"),w(n,e.track),n.append(...Array.from(i.childNodes))),n.setAttribute("aria-live","polite"),i.contains(n)||i.prepend(n),this.viewport=i,this.track=n,this.emit("initLayout")}initSlides(){const{track:t}=this;if(t){this.slides=[],[...C(t,`.${this.cn("slide")}`)].forEach((t=>{if(y(t)){const e=z({el:t,isDom:!0,index:this.slides.length});this.slides.push(e),this.emit("initSlide",e,this.slides.length)}}));for(let t of this.option("slides",[])){const e=z(t);e.index=this.slides.length,this.slides.push(e),this.emit("initSlide",e,this.slides.length)}this.emit("initSlides")}}setInitialPage(){let t=0;const e=this.option("initialSlide");t="number"==typeof e?this.getPageForSlide(e):parseInt(this.option("initialPage",0)+"",10)||0,this.page=t}setInitialPosition(){if(!this.track||!this.pages.length)return;const t=this.isHorizontal;let e=this.page;this.pages[e]||(this.page=e=0);const i=this.pages[e].pos*(this.isRTL&&t?1:-1),n=t?`${i}px`:"0",s=t?"0":`${i}px`;this.track.style.transform=`translate3d(${n}, ${s}, 0) scale(1)`,this.option("adaptiveHeight")&&this.setViewportHeight()}initPanzoom(){this.panzoom&&(this.panzoom.destroy(),this.panzoom=null);const t=this.option("Panzoom")||{};this.panzoom=new k(this.viewport,d({},{content:this.track,zoom:!1,panOnlyZoomed:!1,lockAxis:this.isHorizontal?"x":"y",infinite:this.isInfinite,click:!1,dblClick:!1,touch:t=>!(this.pages.length<2&&!t.options.infinite),bounds:()=>this.getBounds(),maxVelocity:t=>Math.abs(t.target[this.axis]-t.current[this.axis])<2*this.viewportDim?100:0},t)),this.panzoom.on("*",((t,e,...i)=>{this.emit(`Panzoom.${e}`,t,...i)})),this.panzoom.on("decel",this.onDecel),this.panzoom.on("refresh",this.onRefresh),this.panzoom.on("beforeTransform",this.onBeforeTransform),this.panzoom.on("endAnimation",this.onEndAnimation)}attachEvents(){const t=this.container;t&&(t.addEventListener("click",this.onClick,{passive:!1,capture:!1}),t.addEventListener("slideTo",this.onSlideTo)),window.addEventListener("resize",this.onResize)}createPages(){let t=[];const{contentDim:e,viewportDim:i}=this;let n=this.option("slidesPerPage");("number"!=typeof n||e<=i)&&(n=1/0);let s=0,o=0,r=0;for(const e of this.slides)(!t.length||o+e.dim>i||r===n)&&(t.push(D()),s=t.length-1,o=0,r=0),t[s].slides.push(e),o+=e.dim+e.gap,r++;return t}processPages(){const e=this.pages,{contentDim:i,viewportDim:n}=this,s=this.option("center"),o=this.option("fill"),r=o&&s&&i>n&&!this.isInfinite;if(e.forEach(((t,e)=>{t.index=e,t.pos=t.slides[0].pos,t.dim=0;for(const[e,i]of t.slides.entries())t.dim+=i.dim,e<t.slides.length-1&&(t.dim+=i.gap);r&&t.pos+.5*t.dim<.5*n?t.pos=0:r&&t.pos+.5*t.dim>=i-.5*n?t.pos=i-n:s&&(t.pos+=-.5*(n-t.dim))})),e.forEach(((e,s)=>{o&&!this.isInfinite&&i>n&&(e.pos=Math.max(e.pos,0),e.pos=Math.min(e.pos,i-n)),e.pos=t(e.pos,1e3),e.dim=t(e.dim,1e3),Math.abs(e.pos)<=.1&&(e.pos=0)})),this.isInfinite)return e;const a=[];let l;return e.forEach((t=>{const e=Object.assign({},t);l&&e.pos===l.pos?(l.dim+=e.dim,l.slides=[...l.slides,...e.slides]):(e.index=a.length,l=e,a.push(e))})),a}getPageFromIndex(t=0){const e=this.pages.length;let i;return t=parseInt((t||0).toString())||0,i=this.isInfinite?(t%e+e)%e:Math.max(Math.min(t,e-1),0),i}getSlideMetrics(e){var i,n;const s=this.isHorizontal?"width":"height";let o=0,r=0,a=e.el;const l=a&&!a.parentNode;if(a?o=parseFloat(a.dataset[s]||"")||0:(a=document.createElement("div"),a.style.visibility="hidden",(this.track||document.body).prepend(a)),w(a,this.cn("slide")+" "+e.class+" "+e.customClass),o)a.style[s]=`${o}px`,a.style["width"===s?"height":"width"]="";else{l&&(this.track||document.body).prepend(a);const t=Math.max(1,(null===(i=window.visualViewport)||void 0===i?void 0:i.scale)||1);o=a.getBoundingClientRect()[s]*t}const c=getComputedStyle(a);return"content-box"===c.boxSizing&&(this.isHorizontal?(o+=parseFloat(c.paddingLeft)||0,o+=parseFloat(c.paddingRight)||0):(o+=parseFloat(c.paddingTop)||0,o+=parseFloat(c.paddingBottom)||0)),r=parseFloat(c[this.isHorizontal?"marginRight":"marginBottom"])||0,l?null===(n=a.parentElement)||void 0===n||n.removeChild(a):e.el||a.remove(),{dim:t(o,1e3),gap:t(r,1e3)}}getBounds(){const{isInfinite:t,isRTL:e,isHorizontal:i,pages:n}=this;let s={min:0,max:0};if(t)s={min:-1/0,max:1/0};else if(n.length){const t=n[0].pos,o=n[n.length-1].pos;s=e&&i?{min:t,max:o}:{min:-1*o,max:-1*t}}return{x:i?s:{min:0,max:0},y:i?{min:0,max:0}:s}}repositionSlides(){let e,{isHorizontal:i,isRTL:n,isInfinite:s,viewport:o,viewportDim:r,contentDim:a,page:l,pages:c,slides:h,panzoom:u}=this,d=0,p=0,f=0,m=0;u?m=-1*u.current[this.axis]:c[l]&&(m=c[l].pos||0),e=i?n?"right":"left":"top",n&&i&&(m*=-1);for(const i of h)i.el?("top"===e?(i.el.style.right="",i.el.style.left=""):i.el.style.top="",i.index!==d?i.el.style[e]=0===p?"":`${t(p,1e3)}px`:i.el.style[e]="",f+=i.dim+i.gap,d++):p+=i.dim+i.gap;if(s&&f&&o){let n=getComputedStyle(o),s="padding",l=i?"Right":"Bottom",c=parseFloat(n[s+(i?"Left":"Top")]);m-=c,r+=c,r+=parseFloat(n[s+l]);for(const i of h)i.el&&(t(i.pos)<t(r)&&t(i.pos+i.dim+i.gap)<t(m)&&t(m)>t(a-r)&&(i.el.style[e]=`${t(p+f,1e3)}px`),t(i.pos+i.gap)>=t(a-r)&&t(i.pos)>t(m+r)&&t(m)<t(r)&&(i.el.style[e]=`-${t(f,1e3)}px`))}let g,b,v=[...this.inTransition];if(v.length>1&&(g=c[v[0]],b=c[v[1]]),g&&b){let i=0;for(const n of h)n.el?this.inTransition.has(n.index)&&g.slides.indexOf(n)<0&&(n.el.style[e]=`${t(i+(g.pos-b.pos),1e3)}px`):i+=n.dim+n.gap}}createSlideEl(t){const{track:e,slides:i}=this;if(!e||!t)return;if(t.el&&t.el.parentNode)return;const n=t.el||document.createElement("div");w(n,this.cn("slide")),w(n,t.class),w(n,t.customClass);const s=t.html;s&&(s instanceof HTMLElement?n.appendChild(s):n.innerHTML=t.html+"");const o=[];i.forEach(((t,e)=>{t.el&&o.push(e)}));const r=t.index;let a=null;o.length&&(a=i[o.reduce(((t,e)=>Math.abs(e-r)<Math.abs(t-r)?e:t))]);const l=a&&a.el&&a.el.parentNode?a.index<t.index?a.el.nextSibling:a.el:null;e.insertBefore(n,e.contains(l)?l:null),t.el=n,this.emit("createSlide",t)}removeSlideEl(t,e=!1){const i=t.el;if(!i||!i.parentNode)return;if(S(i,this.cn("isSelected")),t.isDom&&!e)return i.removeAttribute("aria-hidden"),i.removeAttribute("data-index"),S(i,this.cn("isSelected")),void(i.style.left="");this.emit("removeSlide",t);const n=new CustomEvent("animationend");i.dispatchEvent(n),t.el&&(t.el.remove(),t.el=null)}transitionTo(t=0,e=this.option("transition")){if(!e)return!1;const{pages:i,panzoom:n}=this;t=parseInt((t||0).toString())||0;const s=this.getPageFromIndex(t);if(!n||!i[s]||i.length<2||Math.abs(i[this.page].slides[0].dim-this.viewportDim)>1)return!1;const o=t>this.page?1:-1,r=this.pages[s].pos*(this.isRTL?1:-1);if(this.page===s&&Math.abs(r-n.target[this.axis])<1)return!1;this.clearTransitions();const a=n.isResting;w(this.container,this.cn("inTransition"));const l=this.pages[this.page].slides[0],c=this.pages[s].slides[0];this.inTransition.add(c.index),this.createSlideEl(c);let h=l.el,u=c.el;a||"slide"===e||(e="fadeFast",h=null);const d=this.isRTL?"next":"prev",p=this.isRTL?"prev":"next";return h&&(this.inTransition.add(l.index),l.transition=e,h.addEventListener("animationend",this.onAnimationEnd),h.classList.add(`f-${e}Out`,`to-${o>0?p:d}`)),u&&(c.transition=e,u.addEventListener("animationend",this.onAnimationEnd),u.classList.add(`f-${e}In`,`from-${o>0?d:p}`)),n.panTo({x:this.isHorizontal?r:0,y:this.isHorizontal?0:r,friction:0}),this.onChange(s),!0}manageSlideVisiblity(){const t=new Set,e=new Set,i=this.getVisibleSlides(parseFloat(this.option("preload",0)+"")||0);for(const n of this.slides)i.has(n)?t.add(n):e.add(n);for(const e of this.inTransition)t.add(this.slides[e]);for(const e of t)this.createSlideEl(e),this.lazyLoadSlide(e);for(const i of e)t.has(i)||this.removeSlideEl(i);this.markSelectedSlides(),this.repositionSlides()}markSelectedSlides(){if(!this.pages[this.page]||!this.pages[this.page].slides)return;const t="aria-hidden";let e=this.cn("isSelected");if(e)for(const i of this.slides)i.el&&(i.el.dataset.index=`${i.index}`,this.pages[this.page].slides.includes(i)?(i.el.classList.contains(e)||(w(i.el,e),this.emit("selectSlide",i)),i.el.removeAttribute(t)):(i.el.classList.contains(e)&&(S(i.el,e),this.emit("unselectSlide",i)),i.el.setAttribute(t,"true")))}flipInfiniteTrack(){const t=this.panzoom;if(!t||!this.isInfinite)return;const e="x"===this.option("axis")?"e":"f",{viewportDim:i,contentDim:n}=this;let s=t.current[e],o=t.target[e]-s,r=0,a=.5*i,l=n;this.isRTL&&this.isHorizontal?(s<-a&&(r=-1,s+=l),s>l-a&&(r=1,s-=l)):(s>a&&(r=1,s-=l),s<-l+a&&(r=-1,s+=l)),r&&(t.current[e]=s,t.target[e]=s+o)}lazyLoadSlide(t){const e=this,i=t&&t.el;if(!i)return;const s=new Set,o="f-fadeIn";i.querySelectorAll("[data-lazy-srcset]").forEach((t=>{t instanceof HTMLImageElement&&s.add(t)}));let r=Array.from(i.querySelectorAll("[data-lazy-src]"));i.dataset.lazySrc&&r.push(i),r.map((t=>{t instanceof HTMLImageElement?s.add(t):y(t)&&(t.style.backgroundImage=`url('${t.dataset.lazySrc||""}')`,delete t.dataset.lazySrc)}));const a=(t,i,n)=>{n&&(n.remove(),n=null),i.complete&&(i.classList.add(o),setTimeout((()=>{i.classList.remove(o)}),350),i.style.display=""),this.option("adaptiveHeight")&&t.el&&this.pages[this.page].slides.indexOf(t)>-1&&(e.updateMetrics(),e.setViewportHeight()),this.emit("load",t)};for(const e of s){let i=null;e.src=e.dataset.lazySrcset||e.dataset.lazySrc||"",delete e.dataset.lazySrc,delete e.dataset.lazySrcset,e.style.display="none",e.addEventListener("error",(()=>{a(t,e,i)})),e.addEventListener("load",(()=>{a(t,e,i)})),setTimeout((()=>{e.parentNode&&t.el&&(e.complete?a(t,e,i):(i=n(v),e.parentNode.insertBefore(i,e)))}),300)}}onAnimationEnd(t){var e;const i=t.target,n=i?parseInt(i.dataset.index||"",10)||0:-1,s=this.slides[n],o=t.animationName;if(!i||!s||!o)return;const r=!!this.inTransition.has(n)&&s.transition;r&&o.substring(0,r.length+2)===`f-${r}`&&this.inTransition.delete(n),this.inTransition.size||this.clearTransitions(),n===this.page&&(null===(e=this.panzoom)||void 0===e?void 0:e.isResting)&&this.emit("settle")}onDecel(t,e=0,i=0,n=0,s=0){const{isRTL:o,isHorizontal:r,axis:a,pages:l}=this,c=l.length,h=Math.abs(Math.atan2(i,e)/(Math.PI/180));let u=0;if(u=h>45&&h<135?r?0:i:r?e:0,!c)return;const d=this.option("dragFree");let p=this.page,f=o&&r?1:-1;const m=t.target[a]*f,g=t.current[a]*f;let{pageIndex:b}=this.getPageFromPosition(m),{pageIndex:v}=this.getPageFromPosition(g);d?this.onChange(b):(Math.abs(u)>5?(l[p].dim<document.documentElement["client"+(this.isHorizontal?"Width":"Height")]-1&&(p=v),p=o&&r?u<0?p-1:p+1:u<0?p+1:p-1):p=0===n&&0===s?p:v,this.slideTo(p,{transition:!1,friction:t.option("decelFriction")}))}onClick(t){const e=t.target,i=e&&y(e)?e.dataset:null;let n,s;i&&(void 0!==i.carouselPage?(s="slideTo",n=i.carouselPage):void 0!==i.carouselNext?s="slideNext":void 0!==i.carouselPrev&&(s="slidePrev")),s?(t.preventDefault(),t.stopPropagation(),e&&!e.hasAttribute("disabled")&&this[s](n)):this.emit("click",t)}onSlideTo(t){const e=t.detail||0;this.slideTo(this.getPageForSlide(e),{friction:0})}onChange(t,e=0){const i=this.page;this.prevPage=i,this.page=t,this.option("adaptiveHeight")&&this.setViewportHeight(),t!==i&&(this.markSelectedSlides(),this.emit("change",t,i,e))}onRefresh(){let t=this.contentDim,e=this.viewportDim;this.updateMetrics(),this.contentDim===t&&this.viewportDim===e||this.slideTo(this.page,{friction:0,transition:!1})}onResize(){this.option("breakpoints")&&this.processOptions()}onBeforeTransform(t){this.lp!==t.current[this.axis]&&(this.flipInfiniteTrack(),this.manageSlideVisiblity()),this.lp=t.current.e}onEndAnimation(){this.inTransition.size||this.emit("settle")}reInit(t=null,e=null){this.destroy(),this.state=j.Init,this.userOptions=t||this.userOptions,this.userPlugins=e||this.userPlugins,this.processOptions()}slideTo(t=0,{friction:e=this.option("friction"),transition:i=this.option("transition")}={}){if(this.state===j.Destroy)return;const{axis:n,isHorizontal:s,isRTL:o,pages:r,panzoom:a}=this,l=r.length,c=o&&s?1:-1;if(!a||!l)return;if(this.transitionTo(t,i))return;const h=this.getPageFromIndex(t);let u=r[h].pos;if(this.isInfinite){const e=this.contentDim,i=a.target[n]*c;if(2===l)u+=e*Math.floor(parseFloat(t+"")/2);else{const t=i;u=[u,u-e,u+e].reduce((function(e,i){return Math.abs(i-t)<Math.abs(e-t)?i:e}))}}u*=c,Math.abs(a.target[n]-u)<.1||(a.panTo({x:s?u:0,y:s?0:u,friction:e}),this.onChange(h))}slideToClosest(t){if(this.panzoom){const{pageIndex:e}=this.getPageFromPosition(this.panzoom.current[this.isHorizontal?"e":"f"]);this.slideTo(e,t)}}slideNext(){this.slideTo(this.page+1)}slidePrev(){this.slideTo(this.page-1)}clearTransitions(){this.inTransition.clear(),S(this.container,this.cn("inTransition"));const t=["to-prev","to-next","from-prev","from-next"];for(const e of this.slides){const i=e.el;if(i){i.removeEventListener("animationend",this.onAnimationEnd),i.classList.remove(...t);const n=e.transition;n&&i.classList.remove(`f-${n}Out`,`f-${n}In`)}}this.manageSlideVisiblity()}prependSlide(t){var e,i;let n=Array.isArray(t)?t:[t];for(const t of n.reverse())this.slides.unshift(z(t));for(let t=0;t<this.slides.length;t++)this.slides[t].index=t;const s=(null===(e=this.pages[this.page])||void 0===e?void 0:e.pos)||0;this.page+=n.length,this.updateMetrics();const o=(null===(i=this.pages[this.page])||void 0===i?void 0:i.pos)||0;if(this.panzoom){const t=this.isRTL?s-o:o-s;this.panzoom.target.e-=t,this.panzoom.current.e-=t,this.panzoom.requestTick()}}appendSlide(t){let e=Array.isArray(t)?t:[t];for(const t of e){const e=z(t);e.index=this.slides.length,this.slides.push(e),this.emit("initSlide",e,this.slides.length)}this.updateMetrics()}removeSlide(t){const e=this.slides.length;t=(t%e+e)%e,this.removeSlideEl(this.slides[t],!0),this.slides.splice(t,1);for(let t=0;t<this.slides.length;t++)this.slides[t].index=t;this.updateMetrics(),this.slideTo(this.page,{friction:0,transition:!1})}updateMetrics(){const{panzoom:e,viewport:i,track:n,isHorizontal:s}=this;if(!n)return;const o=s?"width":"height",r=s?"offsetWidth":"offsetHeight";if(i){let e=Math.max(i[r],t(i.getBoundingClientRect()[o],1e3)),n=getComputedStyle(i),a="padding",l=s?"Right":"Bottom";e-=parseFloat(n[a+(s?"Left":"Top")])+parseFloat(n[a+l]),this.viewportDim=e}let a,l=this.pages.length,c=0;for(const[e,i]of this.slides.entries()){let n=0,s=0;!i.el&&a?(n=a.dim,s=a.gap):(({dim:n,gap:s}=this.getSlideMetrics(i)),a=i),n=t(n,1e3),s=t(s,1e3),i.dim=n,i.gap=s,i.pos=c,c+=n,(this.isInfinite||e<this.slides.length-1)&&(c+=s)}const h=this.contentDim;c=t(c,1e3),this.contentDim=c,e&&(e.contentRect[o]=c,e.contentRect["e"===this.axis?"fullWidth":"fullHeight"]=c),this.pages=this.createPages(),this.pages=this.processPages(),this.state===j.Init&&this.setInitialPage(),this.page=Math.max(0,Math.min(this.page,this.pages.length-1)),e&&l===this.pages.length&&Math.abs(c-h)>.5&&(e.target[this.axis]=-1*this.pages[this.page].pos,e.current[this.axis]=-1*this.pages[this.page].pos,e.stop()),this.manageSlideVisiblity(),this.emit("refresh")}getProgress(e,i=!1){void 0===e&&(e=this.page);const n=this,s=n.panzoom,o=n.pages[e]||0;if(!o||!s)return 0;let r=-1*s.current.e,a=n.contentDim;var l=[t((r-o.pos)/(1*o.dim),1e3),t((r+a-o.pos)/(1*o.dim),1e3),t((r-a-o.pos)/(1*o.dim),1e3)].reduce((function(t,e){return Math.abs(e)<Math.abs(t)?e:t}));return i?l:Math.max(-1,Math.min(1,l))}setViewportHeight(){const{page:t,pages:e,viewport:i,isHorizontal:n}=this;if(!i||!e[t])return;let s=0;n&&this.track&&(this.track.style.height="auto",e[t].slides.forEach((t=>{t.el&&(s=Math.max(s,t.el.offsetHeight))}))),i.style.height=s?`${s}px`:""}getPageForSlide(t){for(const e of this.pages)for(const i of e.slides)if(i.index===t)return e.index;return-1}getVisibleSlides(t=0){var e;const i=new Set;let{contentDim:n,viewportDim:s,pages:o,page:r}=this;n=n+(null===(e=this.slides[this.slides.length-1])||void 0===e?void 0:e.gap)||0;let a=0;a=this.panzoom?-1*this.panzoom.current[this.axis]:o[r]&&o[r].pos||0,this.isInfinite&&(a-=Math.floor(a/n)*n),this.isRTL&&this.isHorizontal&&(a*=-1);const l=a-s*t,c=a+s*(t+1),h=this.isInfinite?[-1,0,1]:[0];for(const t of this.slides)for(const e of h){const s=t.pos+e*n,o=t.pos+t.dim+t.gap+e*n;s<c&&o>l&&i.add(t)}return i}getPageFromPosition(t){const{viewportDim:e,contentDim:i}=this,n=this.pages.length,s=this.slides.length,o=this.slides[s-1];let r=0,a=0,l=0;const c=this.option("center");c&&(t+=.5*e),this.isInfinite||(t=Math.max(this.slides[0].pos,Math.min(t,o.pos)));const h=i+o.gap;l=Math.floor(t/h)||0,t-=l*h;let u=o,d=this.slides.find((e=>{const i=t+(u&&!c?.5*u.dim:0);return u=e,e.pos<=i&&e.pos+e.dim+e.gap>i}));return d||(d=o),a=this.getPageForSlide(d.index),r=a+l*n,{page:r,pageIndex:a}}destroy(){if([j.Destroy].includes(this.state))return;this.state=j.Destroy;const{container:t,viewport:e,track:i,slides:n,panzoom:s}=this,o=this.option("classes");t.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),t.removeEventListener("slideTo",this.onSlideTo),window.removeEventListener("resize",this.onResize),s&&(s.destroy(),this.panzoom=null),n&&n.forEach((t=>{this.removeSlideEl(t)})),this.detachPlugins(),e&&e.offsetParent&&i&&i.offsetParent&&e.replaceWith(...i.childNodes);for(const[e,i]of Object.entries(o))"container"!==e&&i&&t.classList.remove(i);this.track=null,this.viewport=null,this.page=0,this.slides=[];const r=this.events.get("ready");this.events=new Map,r&&this.events.set("ready",r)}}Object.defineProperty(V,"Panzoom",{enumerable:!0,configurable:!0,writable:!0,value:k}),Object.defineProperty(V,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{viewport:null,track:null,enabled:!0,slides:[],axis:"x",transition:"fade",preload:1,slidesPerPage:"auto",initialPage:0,friction:.12,Panzoom:{decelFriction:.12},center:!0,infinite:!0,fill:!0,dragFree:!1,adaptiveHeight:!1,direction:"ltr",classes:{container:"f-carousel",viewport:"f-carousel__viewport",track:"f-carousel__track",slide:"f-carousel__slide",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",inTransition:"in-transition",isSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide #%d"}}}),Object.defineProperty(V,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:B});const W=(t,...e)=>{const i=e.length;for(let n=0;n<i;n++){const i=e[n]||{};Object.entries(i).forEach((([e,i])=>{const n=Array.isArray(i)?[]:{};var s;t[e]||Object.assign(t,{[e]:n}),"object"==typeof(s=i)&&null!==s&&s.constructor===Object&&"[object Object]"===Object.prototype.toString.call(s)?Object.assign(t[e],W(n,i)):Array.isArray(i)?Object.assign(t,{[e]:[...i]}):Object.assign(t,{[e]:i})}))}return t},$=function(t,e){return t.split(".").reduce(((t,e)=>"object"==typeof t?t[e]:void 0),e)};class Y{constructor(t={}){Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.setOptions(t);for(const t of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))t.startsWith("on")&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}setOptions(t){this.options=t?W({},this.constructor.defaults,t):{};for(const[t,e]of Object.entries(this.option("on")||{}))this.on(t,e)}option(t,...e){let i=$(t,this.options);return i&&"function"==typeof i&&(i=i.call(this,this,...e)),i}optionFor(t,e,i,...n){let s=$(e,t);var o;"string"!=typeof(o=s)||isNaN(o)||isNaN(parseFloat(o))||(s=parseFloat(s)),"true"===s&&(s=!0),"false"===s&&(s=!1),s&&"function"==typeof s&&(s=s.call(this,this,t,...n));let r=$(e,this.options);return r&&"function"==typeof r?s=r.call(this,this,t,...n,s):void 0===s&&(s=r),void 0===s?i:s}cn(t){const e=this.options.classes;return e&&e[t]||""}localize(t,e=[]){t=String(t).replace(/\{\{(\w+).?(\w+)?\}\}/g,((t,e,i)=>{let n="";return i?n=this.option(`${e[0]+e.toLowerCase().substring(1)}.l10n.${i}`):e&&(n=this.option(`l10n.${e}`)),n||(n=t),n}));for(let i=0;i<e.length;i++)t=t.split(e[i][0]).join(e[i][1]);return t.replace(/\{\{(.*?)\}\}/g,((t,e)=>e))}on(t,e){let i=[];"string"==typeof t?i=t.split(" "):Array.isArray(t)&&(i=t),this.events||(this.events=new Map),i.forEach((t=>{let i=this.events.get(t);i||(this.events.set(t,[]),i=[]),i.includes(e)||i.push(e),this.events.set(t,i)}))}off(t,e){let i=[];"string"==typeof t?i=t.split(" "):Array.isArray(t)&&(i=t),i.forEach((t=>{const i=this.events.get(t);if(Array.isArray(i)){const t=i.indexOf(e);t>-1&&i.splice(t,1)}}))}emit(t,...e){[...this.events.get(t)||[]].forEach((t=>t(this,...e))),"*"!==t&&this.emit("*",t,...e)}}Object.defineProperty(Y,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.22"}),Object.defineProperty(Y,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}});class X extends Y{constructor(t,e){super(e),Object.defineProperty(this,"instance",{enumerable:!0,configurable:!0,writable:!0,value:t})}attach(){}detach(){}}const U=t=>`${t||""}`.split(" ").filter((t=>!!t)),Z=(t,e)=>{t&&U(e).forEach((e=>{t.classList.add(e)}))},G="play",J="pause",K="ready";class Q extends X{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:K}),Object.defineProperty(this,"inHover",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"progressBar",{enumerable:!0,configurable:!0,writable:!0,value:null})}get isActive(){return this.state!==K}onReady(t){this.option("autoStart")&&(t.isInfinite||t.page<t.pages.length-1)&&this.start()}onChange(){var t;(null===(t=this.instance.panzoom)||void 0===t?void 0:t.isResting)||(this.removeProgressBar(),this.pause())}onSettle(){this.resume()}onVisibilityChange(){"visible"===document.visibilityState?this.resume():this.pause()}onMouseEnter(){this.inHover=!0,this.pause()}onMouseLeave(){var t;this.inHover=!1,(null===(t=this.instance.panzoom)||void 0===t?void 0:t.isResting)&&this.resume()}onTimerEnd(){const t=this.instance;"play"===this.state&&(t.isInfinite||t.page!==t.pages.length-1?t.slideNext():t.slideTo(0))}removeProgressBar(){this.progressBar&&(this.progressBar.remove(),this.progressBar=null)}createProgressBar(){var t;if(!this.option("showProgress"))return null;this.removeProgressBar();const e=this.instance,i=(null===(t=e.pages[e.page])||void 0===t?void 0:t.slides)||[];let n=this.option("progressParentEl");if(n||(n=(1===i.length?i[0].el:null)||e.viewport),!n)return null;const s=document.createElement("div");return Z(s,"f-progress"),n.prepend(s),this.progressBar=s,s.offsetHeight,s}set(){const t=this,e=t.instance;if(e.pages.length<2)return;if(t.timer)return;const i=t.option("timeout");t.state=G,Z(e.container,"has-autoplay");let n=t.createProgressBar();n&&(n.style.transitionDuration=`${i}ms`,n.style.transform="scaleX(1)"),t.timer=setTimeout((()=>{t.timer=null,t.inHover||t.onTimerEnd()}),i),t.emit("set")}clear(){const t=this;t.timer&&(clearTimeout(t.timer),t.timer=null),t.removeProgressBar()}start(){const t=this;if(t.set(),t.state!==K){if(t.option("pauseOnHover")){const e=t.instance.container;e.addEventListener("mouseenter",t.onMouseEnter,!1),e.addEventListener("mouseleave",t.onMouseLeave,!1)}document.addEventListener("visibilitychange",t.onVisibilityChange,!1),t.emit("start")}}stop(){const t=this,e=t.state,i=t.instance.container;var n;t.clear(),t.state=K,i.removeEventListener("mouseenter",t.onMouseEnter,!1),i.removeEventListener("mouseleave",t.onMouseLeave,!1),document.removeEventListener("visibilitychange",t.onVisibilityChange,!1),(n=i)&&U("has-autoplay").forEach((t=>{n.classList.remove(t)})),e!==K&&t.emit("stop")}pause(){const t=this;t.state===G&&(t.state=J,t.clear(),t.emit(J))}resume(){const t=this,e=t.instance;if(e.isInfinite||e.page!==e.pages.length-1)if(t.state!==G){if(t.state===J&&!t.inHover){const e=new Event("resume",{bubbles:!0,cancelable:!0});t.emit("resume",e),e.defaultPrevented||t.set()}}else t.set();else t.stop()}toggle(){this.state===G||this.state===J?this.stop():this.start()}attach(){const t=this,e=t.instance;e.on("ready",t.onReady),e.on("Panzoom.startAnimation",t.onChange),e.on("Panzoom.endAnimation",t.onSettle),e.on("Panzoom.touchMove",t.onChange)}detach(){const t=this,e=t.instance;e.off("ready",t.onReady),e.off("Panzoom.startAnimation",t.onChange),e.off("Panzoom.endAnimation",t.onSettle),e.off("Panzoom.touchMove",t.onChange),t.stop()}}Object.defineProperty(Q,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{autoStart:!0,pauseOnHover:!0,progressParentEl:null,showProgress:!0,timeout:3e3}});const tt=(t,...e)=>{const i=e.length;for(let n=0;n<i;n++){const i=e[n]||{};Object.entries(i).forEach((([e,i])=>{const n=Array.isArray(i)?[]:{};var s;t[e]||Object.assign(t,{[e]:n}),"object"==typeof(s=i)&&null!==s&&s.constructor===Object&&"[object Object]"===Object.prototype.toString.call(s)?Object.assign(t[e],tt(n,i)):Array.isArray(i)?Object.assign(t,{[e]:[...i]}):Object.assign(t,{[e]:i})}))}return t},et=function(t){var e=(new DOMParser).parseFromString(t,"text/html").body;if(e.childElementCount>1){for(var i=document.createElement("div");e.firstChild;)i.appendChild(e.firstChild);return i}return e.firstChild},it=t=>`${t||""}`.split(" ").filter((t=>!!t)),nt=(t,e)=>{t&&it(e).forEach((e=>{t.classList.add(e)}))},st=(t,e,i)=>{it(e).forEach((e=>{t&&t.classList.toggle(e,i||!1)}))},ot=(t,e)=>{t&&it(e).forEach((e=>{t.classList.remove(e)}))},rt=function(t,e){return t.split(".").reduce(((t,e)=>"object"==typeof t?t[e]:void 0),e)};class at{constructor(t={}){Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.setOptions(t);for(const t of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))t.startsWith("on")&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}setOptions(t){this.options=t?tt({},this.constructor.defaults,t):{};for(const[t,e]of Object.entries(this.option("on")||{}))this.on(t,e)}option(t,...e){let i=rt(t,this.options);return i&&"function"==typeof i&&(i=i.call(this,this,...e)),i}optionFor(t,e,i,...n){let s=rt(e,t);var o;"string"!=typeof(o=s)||isNaN(o)||isNaN(parseFloat(o))||(s=parseFloat(s)),"true"===s&&(s=!0),"false"===s&&(s=!1),s&&"function"==typeof s&&(s=s.call(this,this,t,...n));let r=rt(e,this.options);return r&&"function"==typeof r?s=r.call(this,this,t,...n,s):void 0===s&&(s=r),void 0===s?i:s}cn(t){const e=this.options.classes;return e&&e[t]||""}localize(t,e=[]){t=String(t).replace(/\{\{(\w+).?(\w+)?\}\}/g,((t,e,i)=>{let n="";return i?n=this.option(`${e[0]+e.toLowerCase().substring(1)}.l10n.${i}`):e&&(n=this.option(`l10n.${e}`)),n||(n=t),n}));for(let i=0;i<e.length;i++)t=t.split(e[i][0]).join(e[i][1]);return t.replace(/\{\{(.*?)\}\}/g,((t,e)=>e))}on(t,e){let i=[];"string"==typeof t?i=t.split(" "):Array.isArray(t)&&(i=t),this.events||(this.events=new Map),i.forEach((t=>{let i=this.events.get(t);i||(this.events.set(t,[]),i=[]),i.includes(e)||i.push(e),this.events.set(t,i)}))}off(t,e){let i=[];"string"==typeof t?i=t.split(" "):Array.isArray(t)&&(i=t),i.forEach((t=>{const i=this.events.get(t);if(Array.isArray(i)){const t=i.indexOf(e);t>-1&&i.splice(t,1)}}))}emit(t,...e){[...this.events.get(t)||[]].forEach((t=>t(this,...e))),"*"!==t&&this.emit("*",t,...e)}}Object.defineProperty(at,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.22"}),Object.defineProperty(at,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}});class lt extends at{constructor(t,e){super(e),Object.defineProperty(this,"instance",{enumerable:!0,configurable:!0,writable:!0,value:t})}attach(){}detach(){}}var ct,ht;!function(t){t[t.Init=0]="Init",t[t.Error=1]="Error",t[t.Ready=2]="Ready",t[t.Panning=3]="Panning",t[t.Mousemove=4]="Mousemove",t[t.Destroy=5]="Destroy"}(ct||(ct={})),function(t){t[t.Init=0]="Init",t[t.Ready=1]="Ready",t[t.Destroy=2]="Destroy"}(ht||(ht={}));const ut=(t,e=1e4)=>(t=parseFloat(t+"")||0,Math.round((t+Number.EPSILON)*e)/e);var dt,pt,ft;!function(t){t[t.Init=0]="Init",t[t.Ready=1]="Ready",t[t.Hidden=2]="Hidden",t[t.Disabled=3]="Disabled"}(dt||(dt={}));class mt extends lt{constructor(){super(...arguments),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"modern"}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"panzoom",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"thumbWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbClipWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbExtraGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"shouldCenter",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:dt.Init})}formatThumb(t,e){return this.instance.localize(e,[["%i",t.index],["%d",t.index+1],["%s",t.thumbSrc||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"]])}getSlides(){const t=[],e=this.option("thumbTpl")||"";if(e)for(const i of this.instance.slides||[]){let n="";i.type&&(n=`for-${i.type}`,i.type&&["video","youtube","vimeo","html5video"].includes(i.type)&&(n+=" for-video")),t.push({html:this.formatThumb(i,e),customClass:n})}return t}onInitSlide(t,e){const i=e.el;i&&(e.thumbSrc=i.dataset.thumbSrc||e.thumbSrc||"",e.thumbClipWidth=parseFloat(i.dataset.thumbClipWidth||"")||e.thumbClipWidth||0,e.thumbHeight=parseFloat(i.dataset.thumbHeight||"")||e.thumbHeight||0)}onInitSlides(){this.state===dt.Init&&this.build()}onRefreshM(){this.refreshModern()}onChangeM(){"modern"===this.type&&(this.shouldCenter=!0,this.centerModern())}onClickModern(t){t.preventDefault(),t.stopPropagation();const e=this.instance,i=e.page,n=t=>{if(t){const e=t.closest("[data-carousel-index]");if(e)return parseInt(e.dataset.carouselIndex||"",10)||0}return-1},s=(t,e)=>{const i=document.elementFromPoint(t,e);return i?n(i):-1};let o=n(t.target);o<0&&(o=s(t.clientX+this.thumbGap,t.clientY),o===i&&(o=i-1)),o<0&&(o=s(t.clientX-this.thumbGap,t.clientY),o===i&&(o=i+1)),o<0&&(o=(e=>{let n=s(t.clientX-e,t.clientY),r=s(t.clientX+e,t.clientY);return o<0&&n===i&&(o=i+1),o<0&&r===i&&(o=i-1),o})(this.thumbExtraGap)),o===i?this.centerModern():o>-1&&o<e.pages.length&&e.slideTo(o)}onTransformM(){if("modern"!==this.type)return;const{instance:t,container:e,track:i}=this,n=t.panzoom;if(!(e&&i&&n&&this.panzoom))return;st(e,this.cn("isResting"),n.state!==ct.Init&&n.isResting);const s=this.thumbGap,o=this.thumbExtraGap,r=this.thumbClipWidth;let a=0,l=0,c=0;for(const e of t.slides){let i=e.index,n=e.thumbSlideEl;if(!n)continue;st(n,this.cn("isSelected"),i===t.page),l=1-Math.abs(t.getProgress(i)),n.style.setProperty("--progress",l?l+"":"");const h=.5*((e.thumbWidth||0)-r);a+=s,a+=h,l&&(a-=l*(h+o)),n.style.setProperty("--shift",a-s+""),a+=h,l&&(a-=l*(h+o)),a-=s,0===i&&(c=o*l)}i&&(i.style.setProperty("--left",c+""),i.style.setProperty("--width",a+c+s+o*l+"")),this.shouldCenter&&this.centerModern()}buildClassic(){const{container:t,track:e}=this,i=this.getSlides();if(!t||!e||!i)return;const n=new this.instance.constructor(t,tt({track:e,infinite:!1,center:!0,fill:!0,dragFree:!0,slidesPerPage:1,transition:!1,Dots:!1,Navigation:!1,classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide"}},this.option("Carousel")||{},{Sync:{target:this.instance},slides:i}));this.carousel=n,this.track=e,n.on("ready",(()=>{this.emit("ready")})),n.on("createSlide",((t,e)=>{this.emit("createSlide",e,e.el)}))}buildModern(){if("modern"!==this.type)return;const{container:t,track:e,instance:i}=this,n=this.option("thumbTpl")||"";if(!t||!e||!n)return;t.addEventListener("keydown",(()=>{ot(t,"is-using-mouse")})),nt(t,"is-horizontal"),this.updateModern();for(const t of i.slides||[]){const i=document.createElement("div");if(nt(i,this.cn("slide")),t.type){let e=`for-${t.type}`;["video","youtube","vimeo","html5video"].includes(t.type)&&(e+=" for-video"),nt(i,e)}i.appendChild(et(this.formatThumb(t,n))),this.emit("createSlide",t,i),t.thumbSlideEl=i,e.appendChild(i),this.resizeModernSlide(t)}const s=new i.constructor.Panzoom(t,{content:e,lockAxis:"x",zoom:!1,panOnlyZoomed:!1,bounds:()=>{let t=0,e=0,n=i.slides[0],s=i.slides[i.slides.length-1],o=i.slides[i.page];return n&&s&&o&&(e=-1*this.getModernThumbPos(0),0!==i.page&&(e+=.5*(n.thumbWidth||0)),t=-1*this.getModernThumbPos(i.slides.length-1),i.page!==i.slides.length-1&&(t+=(s.thumbWidth||0)-(o.thumbWidth||0)-.5*(s.thumbWidth||0))),{x:{min:t,max:e},y:{min:0,max:0}}}});s.on("touchStart",((t,e)=>{this.shouldCenter=!1,nt(this.container,"is-using-mouse")})),s.on("click",((t,e)=>this.onClickModern(e))),s.on("ready",(()=>{this.centerModern(),this.emit("ready")})),s.on(["afterTransform","refresh"],(t=>{this.lazyLoadModern()})),this.panzoom=s,this.refreshModern()}updateModern(){if("modern"!==this.type)return;const{container:t}=this;t&&(this.thumbGap=parseFloat(getComputedStyle(t).getPropertyValue("--f-thumb-gap"))||0,this.thumbExtraGap=parseFloat(getComputedStyle(t).getPropertyValue("--f-thumb-extra-gap"))||0,this.thumbWidth=parseFloat(getComputedStyle(t).getPropertyValue("--f-thumb-width"))||40,this.thumbClipWidth=parseFloat(getComputedStyle(t).getPropertyValue("--f-thumb-clip-width"))||40,this.thumbHeight=parseFloat(getComputedStyle(t).getPropertyValue("--f-thumb-height"))||40)}refreshModern(){var t;if("modern"===this.type){this.updateModern();for(const t of this.instance.slides||[])this.resizeModernSlide(t);this.onTransformM(),null===(t=this.panzoom)||void 0===t||t.updateMetrics(!0),this.centerModern(0)}}centerModern(t){const e=this.instance,{container:i,panzoom:n}=this;if(!i||!n||n.state===ct.Init)return;const s=e.page;let o=this.getModernThumbPos(s),r=o;for(let t=e.page-3;t<e.page+3;t++){if(t<0||t>e.pages.length-1||t===e.page)continue;const i=1-Math.abs(e.getProgress(t));i>0&&i<1&&(r+=i*(this.getModernThumbPos(t)-o))}let a=100;void 0===t&&(t=.2,e.inTransition.size>0&&(t=.12),Math.abs(-1*n.current.e-r)>n.containerRect.width&&(t=.5,a=0)),n.options.maxVelocity=a,n.applyChange({panX:ut(-1*r-n.target.e,1e3),friction:null===e.prevPage?0:t})}lazyLoadModern(){const{instance:t,panzoom:e}=this;if(!e)return;const i=-1*e.current.e||0;let n=this.getModernThumbPos(t.page);if(e.state!==ct.Init||0===n)for(const n of t.slides||[]){const t=n.thumbSlideEl;if(!t)continue;const s=t.querySelector("img[data-lazy-src]"),o=n.index,r=this.getModernThumbPos(o),a=i-.5*e.containerRect.innerWidth,l=a+e.containerRect.innerWidth;if(!s||r<a||r>l)continue;let c=s.dataset.lazySrc;if(!c||!c.length)continue;if(delete s.dataset.lazySrc,s.src=c,s.complete)continue;nt(t,this.cn("isLoading"));const h=et('<div class="f-spinner"><svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="20"></circle><circle cx="25" cy="25" r="20"></circle></svg></div>');t.appendChild(h),s.addEventListener("load",(()=>{t.offsetParent&&(t.classList.remove(this.cn("isLoading")),h.remove())}),!1)}}resizeModernSlide(t){if("modern"!==this.type)return;if(!t.thumbSlideEl)return;const e=t.thumbClipWidth&&t.thumbHeight?Math.round(this.thumbHeight*(t.thumbClipWidth/t.thumbHeight)):this.thumbWidth;t.thumbWidth=e}getModernThumbPos(t){const e=this.instance.slides[t],i=this.panzoom;if(!i||!i.contentRect.fitWidth)return 0;let n=i.containerRect.innerWidth,s=i.contentRect.width;2===this.instance.slides.length&&(t-=1,s=2*this.thumbClipWidth);let o=t*(this.thumbClipWidth+this.thumbGap)+this.thumbExtraGap+.5*(e.thumbWidth||0);return o-=s>n?.5*n:.5*s,ut(o||0,1)}build(){const t=this.instance,e=t.container,i=this.option("minCount")||0;if(i){let e=0;for(const i of t.slides||[])i.thumbSrc&&e++;if(e<i)return this.cleanup(),void(this.state=dt.Disabled)}const n=this.option("type");if(["modern","classic"].indexOf(n)<0)return void(this.state=dt.Disabled);this.type=n;const s=document.createElement("div");nt(s,this.cn("container")),nt(s,`is-${n}`);const o=this.option("parentEl");o?o.appendChild(s):e.after(s),this.container=s,nt(e,this.cn("hasThumbs"));const r=document.createElement("div");nt(r,this.cn("track")),s.appendChild(r),this.track=r,"classic"===n?this.buildClassic():this.buildModern(),this.state=dt.Ready}cleanup(){this.carousel&&this.carousel.destroy(),this.carousel=null,this.panzoom&&this.panzoom.destroy(),this.panzoom=null,this.container&&this.container.remove(),this.container=null,this.track=null,this.state=dt.Init,ot(this.instance.container,this.cn("hasThumbs"))}attach(){const t=this,e=t.instance;e.on("initSlide",t.onInitSlide),e.state===ht.Init?e.on("initSlides",t.onInitSlides):t.onInitSlides(),e.on("Panzoom.afterTransform",t.onTransformM),e.on("Panzoom.refresh",t.onRefreshM),e.on("change",t.onChangeM)}detach(){const t=this,e=t.instance;e.off("initSlide",t.onInitSlide),e.off("initSlides",t.onInitSlides),e.off("Panzoom.afterTransform",t.onTransformM),e.off("Panzoom.refresh",t.onRefreshM),e.off("change",t.onChangeM),t.cleanup()}}function gt(t=!1){(t?t.querySelectorAll('[data-carousel="carousel"]'):document.querySelectorAll('[data-carousel="carousel"]')).forEach((t=>{if(t){let e={},i={},n={},s={},o={},r={};if(t.dataset.options&&(e=JSON.parse(t.dataset.options)),t.dataset.autoplay&&(Object.assign(i,{Autoplay:{timeout:parseInt(t.dataset.autoplay)}}),Object.assign(s,{Autoplay:Q})),t.dataset.thumbs&&(Object.assign(n,{Thumbs:{type:t.dataset.thumbs}}),Object.assign(s,{Thumbs:mt})),t.dataset.disabled&&Object.assign(r,{breakpoints:{[`(${t.dataset.disabled})`]:{enabled:!1}}}),t.dataset.thumbsOn&&t.dataset.thumbsType&&(Object.assign(r,{breakpoints:{[`(${t.dataset.thumbsOn})`]:{Thumbs:{type:t.dataset.thumbsType}}}}),Object.assign(s,{Thumbs:mt})),t.classList.contains("carousel-top-nav")){const t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 18"><path d="M10.452 1 18 9m0 0-7.548 8M18 9H0"/></svg>',e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 18"><path d="M8.548 1 1 9m0 0 7.548 8M1 9h18"/></svg>';Object.assign(o,{Navigation:{nextTpl:t,prevTpl:e}})}Object.assign(e,i,n,o,r),Object.keys(s).length>0&&s.constructor===Object?(console.log(e),new V(t,e,s)):new V(t,e)}}))}function bt(t){return"object"==typeof t&&"function"==typeof t.to}function vt(t){t.parentElement.removeChild(t)}function yt(t){return null!=t}function St(t){t.preventDefault()}function wt(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function xt(t,e,i){i>0&&(Mt(t,e),setTimeout((function(){Lt(t,e)}),i))}function Et(t){return Math.max(Math.min(t,100),0)}function Pt(t){return Array.isArray(t)?t:[t]}function Ot(t){var e=(t=String(t)).split(".");return e.length>1?e[1].length:0}function Mt(t,e){t.classList&&!/\s/.test(e)?t.classList.add(e):t.className+=" "+e}function Lt(t,e){t.classList&&!/\s/.test(e)?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function Tt(t){var e=void 0!==window.pageXOffset,i="CSS1Compat"===(t.compatMode||"");return{x:e?window.pageXOffset:i?t.documentElement.scrollLeft:t.body.scrollLeft,y:e?window.pageYOffset:i?t.documentElement.scrollTop:t.body.scrollTop}}function kt(t,e){return 100/(e-t)}function At(t,e,i){return 100*e/(t[i+1]-t[i])}function Ct(t,e){for(var i=1;t>=e[i];)i+=1;return i}Object.defineProperty(mt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{container:"f-thumbs f-carousel__thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide",isResting:"is-resting",isSelected:"is-selected",isLoading:"is-loading",hasThumbs:"has-thumbs"},minCount:2,parentEl:null,thumbTpl:'<button class="f-thumbs__slide__button" tabindex="0" type="button" aria-label="{{GOTO}}" data-carousel-index="%i"><img class="f-thumbs__slide__img" data-lazy-src="{{%s}}" alt="" /></button>',type:"modern"}}),V.defaults={...V.defaults,infinite:!1,center:!1,slidesPerPage:1,l10n:{NEXT:" ",PREV:" ",GOTO:"Перейти к слайду #%d"}},function(t){t.Range="range",t.Steps="steps",t.Positions="positions",t.Count="count",t.Values="values"}(pt||(pt={})),function(t){t[t.None=-1]="None",t[t.NoValue=0]="NoValue",t[t.LargeValue=1]="LargeValue",t[t.SmallValue=2]="SmallValue"}(ft||(ft={}));var jt=function(){function t(t,e,i){var n;this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[i||!1],this.xNumSteps=[!1],this.snap=e;var s=[];for(Object.keys(t).forEach((function(e){s.push([Pt(t[e]),e])})),s.sort((function(t,e){return t[0][0]-e[0][0]})),n=0;n<s.length;n++)this.handleEntryPoint(s[n][1],s[n][0]);for(this.xNumSteps=this.xSteps.slice(0),n=0;n<this.xNumSteps.length;n++)this.handleStepPoint(n,this.xNumSteps[n])}return t.prototype.getDistance=function(t){for(var e=[],i=0;i<this.xNumSteps.length-1;i++)e[i]=At(this.xVal,t,i);return e},t.prototype.getAbsoluteDistance=function(t,e,i){var n,s=0;if(t<this.xPct[this.xPct.length-1])for(;t>this.xPct[s+1];)s++;else t===this.xPct[this.xPct.length-1]&&(s=this.xPct.length-2);i||t!==this.xPct[s+1]||s++,null===e&&(e=[]);var o=1,r=e[s],a=0,l=0,c=0,h=0;for(n=i?(t-this.xPct[s])/(this.xPct[s+1]-this.xPct[s]):(this.xPct[s+1]-t)/(this.xPct[s+1]-this.xPct[s]);r>0;)a=this.xPct[s+1+h]-this.xPct[s+h],e[s+h]*o+100-100*n>100?(l=a*n,o=(r-100*n)/e[s+h],n=1):(l=e[s+h]*a/100*o,o=0),i?(c-=l,this.xPct.length+h>=1&&h--):(c+=l,this.xPct.length-h>=1&&h++),r=e[s+h]*o;return t+c},t.prototype.toStepping=function(t){return function(t,e,i){if(i>=t.slice(-1)[0])return 100;var n=Ct(i,t),s=t[n-1],o=t[n],r=e[n-1],a=e[n];return r+function(t,e){return At(t,t[0]<0?e+Math.abs(t[0]):e-t[0],0)}([s,o],i)/kt(r,a)}(this.xVal,this.xPct,t)},t.prototype.fromStepping=function(t){return function(t,e,i){if(i>=100)return t.slice(-1)[0];var n=Ct(i,e),s=t[n-1],o=t[n],r=e[n-1];return function(t,e){return e*(t[1]-t[0])/100+t[0]}([s,o],(i-r)*kt(r,e[n]))}(this.xVal,this.xPct,t)},t.prototype.getStep=function(t){return function(t,e,i,n){if(100===n)return n;var s=Ct(n,t),o=t[s-1],r=t[s];return i?n-o>(r-o)/2?r:o:e[s-1]?t[s-1]+function(t,e){return Math.round(t/e)*e}(n-t[s-1],e[s-1]):n}(this.xPct,this.xSteps,this.snap,t)},t.prototype.getDefaultStep=function(t,e,i){var n=Ct(t,this.xPct);return(100===t||e&&t===this.xPct[n-1])&&(n=Math.max(n-1,1)),(this.xVal[n]-this.xVal[n-1])/i},t.prototype.getNearbySteps=function(t){var e=Ct(t,this.xPct);return{stepBefore:{startValue:this.xVal[e-2],step:this.xNumSteps[e-2],highestStep:this.xHighestCompleteStep[e-2]},thisStep:{startValue:this.xVal[e-1],step:this.xNumSteps[e-1],highestStep:this.xHighestCompleteStep[e-1]},stepAfter:{startValue:this.xVal[e],step:this.xNumSteps[e],highestStep:this.xHighestCompleteStep[e]}}},t.prototype.countStepDecimals=function(){var t=this.xNumSteps.map(Ot);return Math.max.apply(null,t)},t.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},t.prototype.convert=function(t){return this.getStep(this.toStepping(t))},t.prototype.handleEntryPoint=function(t,e){var i;if(!wt(i="min"===t?0:"max"===t?100:parseFloat(t))||!wt(e[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(i),this.xVal.push(e[0]);var n=Number(e[1]);i?this.xSteps.push(!isNaN(n)&&n):isNaN(n)||(this.xSteps[0]=n),this.xHighestCompleteStep.push(0)},t.prototype.handleStepPoint=function(t,e){if(e)if(this.xVal[t]!==this.xVal[t+1]){this.xSteps[t]=At([this.xVal[t],this.xVal[t+1]],e,0)/kt(this.xPct[t],this.xPct[t+1]);var i=(this.xVal[t+1]-this.xVal[t])/this.xNumSteps[t],n=Math.ceil(Number(i.toFixed(3))-1),s=this.xVal[t]+this.xNumSteps[t]*n;this.xHighestCompleteStep[t]=s}else this.xSteps[t]=this.xHighestCompleteStep[t]=this.xVal[t]},t}(),zt={to:function(t){return void 0===t?"":t.toFixed(2)},from:Number},Dt={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},Rt=".__tooltips",Nt=".__aria";function Ht(t,e){if(!wt(e))throw new Error("noUiSlider: 'step' is not numeric.");t.singleStep=e}function It(t,e){if(!wt(e))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");t.keyboardPageMultiplier=e}function Ft(t,e){if(!wt(e))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");t.keyboardMultiplier=e}function _t(t,e){if(!wt(e))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");t.keyboardDefaultStep=e}function qt(t,e){if("object"!=typeof e||Array.isArray(e))throw new Error("noUiSlider: 'range' is not an object.");if(void 0===e.min||void 0===e.max)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");t.spectrum=new jt(e,t.snap||!1,t.singleStep)}function Bt(t,e){if(e=Pt(e),!Array.isArray(e)||!e.length)throw new Error("noUiSlider: 'start' option is incorrect.");t.handles=e.length,t.start=e}function Vt(t,e){if("boolean"!=typeof e)throw new Error("noUiSlider: 'snap' option must be a boolean.");t.snap=e}function Wt(t,e){if("boolean"!=typeof e)throw new Error("noUiSlider: 'animate' option must be a boolean.");t.animate=e}function $t(t,e){if("number"!=typeof e)throw new Error("noUiSlider: 'animationDuration' option must be a number.");t.animationDuration=e}function Yt(t,e){var i,n=[!1];if("lower"===e?e=[!0,!1]:"upper"===e&&(e=[!1,!0]),!0===e||!1===e){for(i=1;i<t.handles;i++)n.push(e);n.push(!1)}else{if(!Array.isArray(e)||!e.length||e.length!==t.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");n=e}t.connect=n}function Xt(t,e){switch(e){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function Ut(t,e){if(!wt(e))throw new Error("noUiSlider: 'margin' option must be numeric.");0!==e&&(t.margin=t.spectrum.getDistance(e))}function Zt(t,e){if(!wt(e))throw new Error("noUiSlider: 'limit' option must be numeric.");if(t.limit=t.spectrum.getDistance(e),!t.limit||t.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function Gt(t,e){var i;if(!wt(e)&&!Array.isArray(e))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(e)&&2!==e.length&&!wt(e[0])&&!wt(e[1]))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==e){for(Array.isArray(e)||(e=[e,e]),t.padding=[t.spectrum.getDistance(e[0]),t.spectrum.getDistance(e[1])],i=0;i<t.spectrum.xNumSteps.length-1;i++)if(t.padding[0][i]<0||t.padding[1][i]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var n=e[0]+e[1],s=t.spectrum.xVal[0];if(n/(t.spectrum.xVal[t.spectrum.xVal.length-1]-s)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function Jt(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function Kt(t,e){if("string"!=typeof e)throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var i=e.indexOf("tap")>=0,n=e.indexOf("drag")>=0,s=e.indexOf("fixed")>=0,o=e.indexOf("snap")>=0,r=e.indexOf("hover")>=0,a=e.indexOf("unconstrained")>=0,l=e.indexOf("drag-all")>=0,c=e.indexOf("smooth-steps")>=0;if(s){if(2!==t.handles)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");Ut(t,t.start[1]-t.start[0])}if(a&&(t.margin||t.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");t.events={tap:i||o,drag:n,dragAll:l,smoothSteps:c,fixed:s,snap:o,hover:r,unconstrained:a}}function Qt(t,e){if(!1!==e)if(!0===e||bt(e)){t.tooltips=[];for(var i=0;i<t.handles;i++)t.tooltips.push(e)}else{if((e=Pt(e)).length!==t.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");e.forEach((function(t){if("boolean"!=typeof t&&!bt(t))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")})),t.tooltips=e}}function te(t,e){if(e.length!==t.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");t.handleAttributes=e}function ee(t,e){if(!bt(e))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");t.ariaFormat=e}function ie(t,e){if(!function(t){return bt(t)&&"function"==typeof t.from}(e))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");t.format=e}function ne(t,e){if("boolean"!=typeof e)throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");t.keyboardSupport=e}function se(t,e){t.documentElement=e}function oe(t,e){if("string"!=typeof e&&!1!==e)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");t.cssPrefix=e}function re(t,e){if("object"!=typeof e)throw new Error("noUiSlider: 'cssClasses' must be an object.");"string"==typeof t.cssPrefix?(t.cssClasses={},Object.keys(e).forEach((function(i){t.cssClasses[i]=t.cssPrefix+e[i]}))):t.cssClasses=e}function ae(t){var e={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:zt,format:zt},i={step:{r:!1,t:Ht},keyboardPageMultiplier:{r:!1,t:It},keyboardMultiplier:{r:!1,t:Ft},keyboardDefaultStep:{r:!1,t:_t},start:{r:!0,t:Bt},connect:{r:!0,t:Yt},direction:{r:!0,t:Jt},snap:{r:!1,t:Vt},animate:{r:!1,t:Wt},animationDuration:{r:!1,t:$t},range:{r:!0,t:qt},orientation:{r:!1,t:Xt},margin:{r:!1,t:Ut},limit:{r:!1,t:Zt},padding:{r:!1,t:Gt},behaviour:{r:!0,t:Kt},ariaFormat:{r:!1,t:ee},format:{r:!1,t:ie},tooltips:{r:!1,t:Qt},keyboardSupport:{r:!0,t:ne},documentElement:{r:!1,t:se},cssPrefix:{r:!0,t:oe},cssClasses:{r:!0,t:re},handleAttributes:{r:!1,t:te}},n={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:Dt,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};t.format&&!t.ariaFormat&&(t.ariaFormat=t.format),Object.keys(i).forEach((function(s){if(yt(t[s])||void 0!==n[s])i[s].t(e,yt(t[s])?t[s]:n[s]);else if(i[s].r)throw new Error("noUiSlider: '"+s+"' is required.")})),e.pips=t.pips;var s=document.createElement("div"),o=void 0!==s.style.msTransform,r=void 0!==s.style.transform;return e.transformRule=r?"transform":o?"msTransform":"webkitTransform",e.style=[["left","top"],["right","bottom"]][e.dir][e.ort],e}function le(t,e,i){var n,s,o,r,a,l,c,h=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},u=window.CSS&&CSS.supports&&CSS.supports("touch-action","none")&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}(),d=t,p=e.spectrum,f=[],m=[],g=[],b=0,v={},y=t.ownerDocument,S=e.documentElement||y.documentElement,w=y.body,x="rtl"===y.dir||1===e.ort?0:100;function E(t,e){var i=y.createElement("div");return e&&Mt(i,e),t.appendChild(i),i}function P(t,i){var n=E(t,e.cssClasses.origin),s=E(n,e.cssClasses.handle);if(E(s,e.cssClasses.touchArea),s.setAttribute("data-handle",String(i)),e.keyboardSupport&&(s.setAttribute("tabindex","0"),s.addEventListener("keydown",(function(t){return function(t,i){if(L()||T(i))return!1;var n=["Left","Right"],s=["Down","Up"],o=["PageDown","PageUp"],r=["Home","End"];e.dir&&!e.ort?n.reverse():e.ort&&!e.dir&&(s.reverse(),o.reverse());var a,l=t.key.replace("Arrow",""),c=l===o[0],h=l===o[1],u=l===s[0]||l===n[0]||c,d=l===s[1]||l===n[1]||h,g=l===r[1];if(!(u||d||l===r[0]||g))return!0;if(t.preventDefault(),d||u){var b=u?0:1,v=tt(i)[b];if(null===v)return!1;!1===v&&(v=p.getDefaultStep(m[i],u,e.keyboardDefaultStep)),v*=h||c?e.keyboardPageMultiplier:e.keyboardMultiplier,v=Math.max(v,1e-7),v*=u?-1:1,a=f[i]+v}else a=g?e.spectrum.xVal[e.spectrum.xVal.length-1]:e.spectrum.xVal[0];return Z(i,p.toStepping(a),!0,!0),V("slide",i),V("update",i),V("change",i),V("set",i),!1}(t,i)}))),void 0!==e.handleAttributes){var o=e.handleAttributes[i];Object.keys(o).forEach((function(t){s.setAttribute(t,o[t])}))}return s.setAttribute("role","slider"),s.setAttribute("aria-orientation",e.ort?"vertical":"horizontal"),0===i?Mt(s,e.cssClasses.handleLower):i===e.handles-1&&Mt(s,e.cssClasses.handleUpper),n.handle=s,n}function O(t,i){return!!i&&E(t,e.cssClasses.connect)}function M(t,i){return!(!e.tooltips||!e.tooltips[i])&&E(t.firstChild,e.cssClasses.tooltip)}function L(){return d.hasAttribute("disabled")}function T(t){return s[t].hasAttribute("disabled")}function k(){a&&(B("update"+Rt),a.forEach((function(t){t&&vt(t)})),a=null)}function A(){k(),a=s.map(M),q("update"+Rt,(function(t,i,n){if(a&&e.tooltips&&!1!==a[i]){var s=t[i];!0!==e.tooltips[i]&&(s=e.tooltips[i].to(n[i])),a[i].innerHTML=s}}))}function C(t,e){return t.map((function(t){return p.fromStepping(e?p.getStep(t):t)}))}function j(){r&&(vt(r),r=null)}function z(t){j();var i=function(t){var e,i=function(t){if(t.mode===pt.Range||t.mode===pt.Steps)return p.xVal;if(t.mode===pt.Count){if(t.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var e=t.values-1,i=100/e,n=[];e--;)n[e]=e*i;return n.push(100),C(n,t.stepped)}return t.mode===pt.Positions?C(t.values,t.stepped):t.mode===pt.Values?t.stepped?t.values.map((function(t){return p.fromStepping(p.getStep(p.toStepping(t)))})):t.values:[]}(t),n={},s=p.xVal[0],o=p.xVal[p.xVal.length-1],r=!1,a=!1,l=0;return e=i.slice().sort((function(t,e){return t-e})),i=e.filter((function(t){return!this[t]&&(this[t]=!0)}),{}),i[0]!==s&&(i.unshift(s),r=!0),i[i.length-1]!==o&&(i.push(o),a=!0),i.forEach((function(e,s){var o,c,h,u,d,f,m,g,b,v,y=e,S=i[s+1],w=t.mode===pt.Steps;for(w&&(o=p.xNumSteps[s]),o||(o=S-y),void 0===S&&(S=y),o=Math.max(o,1e-7),c=y;c<=S;c=Number((c+o).toFixed(7))){for(g=(d=(u=p.toStepping(c))-l)/(t.density||1),v=d/(b=Math.round(g)),h=1;h<=b;h+=1)n[(f=l+h*v).toFixed(5)]=[p.fromStepping(f),0];m=i.indexOf(c)>-1?ft.LargeValue:w?ft.SmallValue:ft.NoValue,!s&&r&&c!==S&&(m=0),c===S&&a||(n[u.toFixed(5)]=[c,m]),l=u}})),n}(t),n=t.filter,s=t.format||{to:function(t){return String(Math.round(t))}};return r=d.appendChild(function(t,i,n){var s,o,r=y.createElement("div"),a=((s={})[ft.None]="",s[ft.NoValue]=e.cssClasses.valueNormal,s[ft.LargeValue]=e.cssClasses.valueLarge,s[ft.SmallValue]=e.cssClasses.valueSub,s),l=((o={})[ft.None]="",o[ft.NoValue]=e.cssClasses.markerNormal,o[ft.LargeValue]=e.cssClasses.markerLarge,o[ft.SmallValue]=e.cssClasses.markerSub,o),c=[e.cssClasses.valueHorizontal,e.cssClasses.valueVertical],h=[e.cssClasses.markerHorizontal,e.cssClasses.markerVertical];function u(t,i){var n=i===e.cssClasses.value,s=n?a:l;return i+" "+(n?c:h)[e.ort]+" "+s[t]}return Mt(r,e.cssClasses.pips),Mt(r,0===e.ort?e.cssClasses.pipsHorizontal:e.cssClasses.pipsVertical),Object.keys(t).forEach((function(s){!function(t,s,o){if((o=i?i(s,o):o)!==ft.None){var a=E(r,!1);a.className=u(o,e.cssClasses.marker),a.style[e.style]=t+"%",o>ft.NoValue&&((a=E(r,!1)).className=u(o,e.cssClasses.value),a.setAttribute("data-value",String(s)),a.style[e.style]=t+"%",a.innerHTML=String(n.to(s)))}}(s,t[s][0],t[s][1])})),r}(i,n,s))}function D(){var t=n.getBoundingClientRect(),i="offset"+["Width","Height"][e.ort];return 0===e.ort?t.width||n[i]:t.height||n[i]}function R(t,i,n,s){var o=function(o){var r,a,l=function(t,e,i){var n=0===t.type.indexOf("touch"),s=0===t.type.indexOf("mouse"),o=0===t.type.indexOf("pointer"),r=0,a=0;if(0===t.type.indexOf("MSPointer")&&(o=!0),"mousedown"===t.type&&!t.buttons&&!t.touches)return!1;if(n){var l=function(e){var n=e.target;return n===i||i.contains(n)||t.composed&&t.composedPath().shift()===i};if("touchstart"===t.type){var c=Array.prototype.filter.call(t.touches,l);if(c.length>1)return!1;r=c[0].pageX,a=c[0].pageY}else{var h=Array.prototype.find.call(t.changedTouches,l);if(!h)return!1;r=h.pageX,a=h.pageY}}return e=e||Tt(y),(s||o)&&(r=t.clientX+e.x,a=t.clientY+e.y),t.pageOffset=e,t.points=[r,a],t.cursor=s||o,t}(o,s.pageOffset,s.target||i);return!!l&&!(L()&&!s.doNotReject)&&(r=d,a=e.cssClasses.tap,!((r.classList?r.classList.contains(a):new RegExp("\\b"+a+"\\b").test(r.className))&&!s.doNotReject)&&!(t===h.start&&void 0!==l.buttons&&l.buttons>1)&&(!s.hover||!l.buttons)&&(u||l.preventDefault(),l.calcPoint=l.points[e.ort],void n(l,s)))},r=[];return t.split(" ").forEach((function(t){i.addEventListener(t,o,!!u&&{passive:!0}),r.push([t,o])})),r}function N(t){var i,s,o,r,a,l,c=100*(t-(i=n,s=e.ort,o=i.getBoundingClientRect(),a=(r=i.ownerDocument).documentElement,l=Tt(r),/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(l.x=0),s?o.top+l.y-a.clientTop:o.left+l.x-a.clientLeft))/D();return c=Et(c),e.dir?100-c:c}function H(t,e){"mouseout"===t.type&&"HTML"===t.target.nodeName&&null===t.relatedTarget&&F(t,e)}function I(t,i){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===t.buttons&&0!==i.buttonsProperty)return F(t,i);var n=(e.dir?-1:1)*(t.calcPoint-i.startCalcPoint);Y(n>0,100*n/i.baseSize,i.locations,i.handleNumbers,i.connect)}function F(t,i){i.handle&&(Lt(i.handle,e.cssClasses.active),b-=1),i.listeners.forEach((function(t){S.removeEventListener(t[0],t[1])})),0===b&&(Lt(d,e.cssClasses.drag),U(),t.cursor&&(w.style.cursor="",w.removeEventListener("selectstart",St))),e.events.smoothSteps&&(i.handleNumbers.forEach((function(t){Z(t,m[t],!0,!0,!1,!1)})),i.handleNumbers.forEach((function(t){V("update",t)}))),i.handleNumbers.forEach((function(t){V("change",t),V("set",t),V("end",t)}))}function _(t,i){if(!i.handleNumbers.some(T)){var n;1===i.handleNumbers.length&&(n=s[i.handleNumbers[0]].children[0],b+=1,Mt(n,e.cssClasses.active)),t.stopPropagation();var o=[],r=R(h.move,S,I,{target:t.target,handle:n,connect:i.connect,listeners:o,startCalcPoint:t.calcPoint,baseSize:D(),pageOffset:t.pageOffset,handleNumbers:i.handleNumbers,buttonsProperty:t.buttons,locations:m.slice()}),a=R(h.end,S,F,{target:t.target,handle:n,listeners:o,doNotReject:!0,handleNumbers:i.handleNumbers}),l=R("mouseout",S,H,{target:t.target,handle:n,listeners:o,doNotReject:!0,handleNumbers:i.handleNumbers});o.push.apply(o,r.concat(a,l)),t.cursor&&(w.style.cursor=getComputedStyle(t.target).cursor,s.length>1&&Mt(d,e.cssClasses.drag),w.addEventListener("selectstart",St,!1)),i.handleNumbers.forEach((function(t){V("start",t)}))}}function q(t,e){v[t]=v[t]||[],v[t].push(e),"update"===t.split(".")[0]&&s.forEach((function(t,e){V("update",e)}))}function B(t){var e=t&&t.split(".")[0],i=e?t.substring(e.length):t;Object.keys(v).forEach((function(t){var n=t.split(".")[0],s=t.substring(n.length);e&&e!==n||i&&i!==s||function(t){return t===Nt||t===Rt}(s)&&i!==s||delete v[t]}))}function V(t,i,n){Object.keys(v).forEach((function(s){var o=s.split(".")[0];t===o&&v[s].forEach((function(t){t.call(et,f.map(e.format.to),i,f.slice(),n||!1,m.slice(),et)}))}))}function W(t,i,n,o,r,a,l){var c;return s.length>1&&!e.events.unconstrained&&(o&&i>0&&(c=p.getAbsoluteDistance(t[i-1],e.margin,!1),n=Math.max(n,c)),r&&i<s.length-1&&(c=p.getAbsoluteDistance(t[i+1],e.margin,!0),n=Math.min(n,c))),s.length>1&&e.limit&&(o&&i>0&&(c=p.getAbsoluteDistance(t[i-1],e.limit,!1),n=Math.min(n,c)),r&&i<s.length-1&&(c=p.getAbsoluteDistance(t[i+1],e.limit,!0),n=Math.max(n,c))),e.padding&&(0===i&&(c=p.getAbsoluteDistance(0,e.padding[0],!1),n=Math.max(n,c)),i===s.length-1&&(c=p.getAbsoluteDistance(100,e.padding[1],!0),n=Math.min(n,c))),l||(n=p.getStep(n)),!((n=Et(n))===t[i]&&!a)&&n}function $(t,i){var n=e.ort;return(n?i:t)+", "+(n?t:i)}function Y(t,i,n,s,o){var r=n.slice(),a=s[0],l=e.events.smoothSteps,c=[!t,t],h=[t,!t];s=s.slice(),t&&s.reverse(),s.length>1?s.forEach((function(t,e){var n=W(r,t,r[t]+i,c[e],h[e],!1,l);!1===n?i=0:(i=n-r[t],r[t]=n)})):c=h=[!0];var u=!1;s.forEach((function(t,e){u=Z(t,n[t]+i,c[e],h[e],!1,l)||u})),u&&(s.forEach((function(t){V("update",t),V("slide",t)})),null!=o&&V("drag",a))}function X(t,i){return e.dir?100-t-i:t}function U(){g.forEach((function(t){var e=m[t]>50?-1:1,i=3+(s.length+e*t);s[t].style.zIndex=String(i)}))}function Z(t,i,n,o,r,a){return r||(i=W(m,t,i,n,o,!1,a)),!1!==i&&(function(t,i){m[t]=i,f[t]=p.fromStepping(i);var n="translate("+$(X(i,0)-x+"%","0")+")";s[t].style[e.transformRule]=n,G(t),G(t+1)}(t,i),!0)}function G(t){if(o[t]){var i=0,n=100;0!==t&&(i=m[t-1]),t!==o.length-1&&(n=m[t]);var s=n-i,r="translate("+$(X(i,s)+"%","0")+")",a="scale("+$(s/100,"1")+")";o[t].style[e.transformRule]=r+" "+a}}function J(t,i){return null===t||!1===t||void 0===t?m[i]:("number"==typeof t&&(t=String(t)),!1!==(t=e.format.from(t))&&(t=p.toStepping(t)),!1===t||isNaN(t)?m[i]:t)}function K(t,i,n){var s=Pt(t),o=void 0===m[0];i=void 0===i||i,e.animate&&!o&&xt(d,e.cssClasses.tap,e.animationDuration),g.forEach((function(t){Z(t,J(s[t],t),!0,!1,n)}));var r=1===g.length?0:1;if(o&&p.hasNoSize()&&(n=!0,m[0]=0,g.length>1)){var a=100/(g.length-1);g.forEach((function(t){m[t]=t*a}))}for(;r<g.length;++r)g.forEach((function(t){Z(t,m[t],!0,!0,n)}));U(),g.forEach((function(t){V("update",t),null!==s[t]&&i&&V("set",t)}))}function Q(t){if(void 0===t&&(t=!1),t)return 1===f.length?f[0]:f.slice(0);var i=f.map(e.format.to);return 1===i.length?i[0]:i}function tt(t){var i=m[t],n=p.getNearbySteps(i),s=f[t],o=n.thisStep.step,r=null;if(e.snap)return[s-n.stepBefore.startValue||null,n.stepAfter.startValue-s||null];!1!==o&&s+o>n.stepAfter.startValue&&(o=n.stepAfter.startValue-s),r=s>n.thisStep.startValue?n.thisStep.step:!1!==n.stepBefore.step&&s-n.stepBefore.highestStep,100===i?o=null:0===i&&(r=null);var a=p.countStepDecimals();return null!==o&&!1!==o&&(o=Number(o.toFixed(a))),null!==r&&!1!==r&&(r=Number(r.toFixed(a))),[r,o]}Mt(l=d,e.cssClasses.target),0===e.dir?Mt(l,e.cssClasses.ltr):Mt(l,e.cssClasses.rtl),0===e.ort?Mt(l,e.cssClasses.horizontal):Mt(l,e.cssClasses.vertical),Mt(l,"rtl"===getComputedStyle(l).direction?e.cssClasses.textDirectionRtl:e.cssClasses.textDirectionLtr),n=E(l,e.cssClasses.base),function(t,i){var n=E(i,e.cssClasses.connects);s=[],(o=[]).push(O(n,t[0]));for(var r=0;r<e.handles;r++)s.push(P(i,r)),g[r]=r,o.push(O(n,t[r+1]))}(e.connect,n),(c=e.events).fixed||s.forEach((function(t,e){R(h.start,t.children[0],_,{handleNumbers:[e]})})),c.tap&&R(h.start,n,(function(t){t.stopPropagation();var i=N(t.calcPoint),n=function(t){var e=100,i=!1;return s.forEach((function(n,s){if(!T(s)){var o=m[s],r=Math.abs(o-t);(r<e||r<=e&&t>o||100===r&&100===e)&&(i=s,e=r)}})),i}(i);!1!==n&&(e.events.snap||xt(d,e.cssClasses.tap,e.animationDuration),Z(n,i,!0,!0),U(),V("slide",n,!0),V("update",n,!0),e.events.snap?_(t,{handleNumbers:[n]}):(V("change",n,!0),V("set",n,!0)))}),{}),c.hover&&R(h.move,n,(function(t){var e=N(t.calcPoint),i=p.getStep(e),n=p.fromStepping(i);Object.keys(v).forEach((function(t){"hover"===t.split(".")[0]&&v[t].forEach((function(t){t.call(et,n)}))}))}),{hover:!0}),c.drag&&o.forEach((function(t,i){if(!1!==t&&0!==i&&i!==o.length-1){var n=s[i-1],r=s[i],a=[t],l=[n,r],u=[i-1,i];Mt(t,e.cssClasses.draggable),c.fixed&&(a.push(n.children[0]),a.push(r.children[0])),c.dragAll&&(l=s,u=g),a.forEach((function(e){R(h.start,e,_,{handles:l,handleNumbers:u,connect:t})}))}})),K(e.start),e.pips&&z(e.pips),e.tooltips&&A(),B("update"+Nt),q("update"+Nt,(function(t,i,n,o,r){g.forEach((function(t){var i=s[t],o=W(m,t,0,!0,!0,!0),a=W(m,t,100,!0,!0,!0),l=r[t],c=String(e.ariaFormat.to(n[t]));o=p.fromStepping(o).toFixed(1),a=p.fromStepping(a).toFixed(1),l=p.fromStepping(l).toFixed(1),i.children[0].setAttribute("aria-valuemin",o),i.children[0].setAttribute("aria-valuemax",a),i.children[0].setAttribute("aria-valuenow",l),i.children[0].setAttribute("aria-valuetext",c)}))}));var et={destroy:function(){for(B(Nt),B(Rt),Object.keys(e.cssClasses).forEach((function(t){Lt(d,e.cssClasses[t])}));d.firstChild;)d.removeChild(d.firstChild);delete d.noUiSlider},steps:function(){return g.map(tt)},on:q,off:B,get:Q,set:K,setHandle:function(t,e,i,n){if(!((t=Number(t))>=0&&t<g.length))throw new Error("noUiSlider: invalid handle number, got: "+t);Z(t,J(e,t),!0,!0,n),V("update",t),i&&V("set",t)},reset:function(t){K(e.start,t)},disable:function(t){null!=t?(s[t].setAttribute("disabled",""),s[t].handle.removeAttribute("tabindex")):(d.setAttribute("disabled",""),s.forEach((function(t){t.handle.removeAttribute("tabindex")})))},enable:function(t){null!=t?(s[t].removeAttribute("disabled"),s[t].handle.setAttribute("tabindex","0")):(d.removeAttribute("disabled"),s.forEach((function(t){t.removeAttribute("disabled"),t.handle.setAttribute("tabindex","0")})))},__moveHandles:function(t,e,i){Y(t,e,m,i)},options:i,updateOptions:function(t,n){var s=Q(),o=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];o.forEach((function(e){void 0!==t[e]&&(i[e]=t[e])}));var r=ae(i);o.forEach((function(i){void 0!==t[i]&&(e[i]=r[i])})),p=r.spectrum,e.margin=r.margin,e.limit=r.limit,e.padding=r.padding,e.pips?z(e.pips):j(),e.tooltips?A():k(),m=[],K(yt(t.start)?t.start:s,n)},target:d,removePips:j,removeTooltips:k,getPositions:function(){return m.slice()},getTooltips:function(){return a},getOrigins:function(){return s},pips:z};return et}const ce=function(t,e){if(!t||!t.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+t);if(t.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var i=le(t,ae(e),e);return t.noUiSlider=i,i};var he=i(18);function ue(){const t=document.querySelectorAll('[data-range="rangeslider"]');if(!t)return;t.forEach((t=>{if(!t.noUiSlider&&t){let e=parseInt(t.dataset.min),i=parseInt(t.dataset.max),n=parseInt(t.dataset.from),s=parseInt(t.dataset.to),o=parseInt(t.dataset.step);ce(t,{start:[n||e,s||i],range:{min:e,max:i},step:o||500,connect:!0,behaviour:"none",format:he({decimals:0,thousand:" "})});let r=[t.parentNode.querySelector(".input-min"),t.parentNode.querySelector(".input-max")];t.noUiSlider.on("update",((t,e)=>{r[e].value=t[e]})),t.noUiSlider.on("end",((t,e)=>{const i=new Event("input",{bubbles:!0});r[e].dispatchEvent(i)}))}}));const e=document.querySelector(".js-filter-reset");e&&e.addEventListener("click",(()=>{e.closest("form").querySelectorAll('[data-range="rangeslider"]').forEach((t=>{t&&t.noUiSlider.set([0,999999999])}))}))}function de(t=!1){const e="is-active";t?t.querySelector(".item__gallery-item").classList.add(e):document.querySelectorAll(".catalog-items, .product-carousel").forEach((t=>{t&&t.querySelectorAll(".item").forEach((t=>{t.querySelector(".item__gallery-item").classList.add(e)}))}))}function pe(){const t=document.querySelectorAll(".catalog-items, .product-carousel"),e="is-active";t.forEach((t=>{t&&t.addEventListener("mouseover",(t=>{const i=t.target.closest(".item");if(!i)return;const n=i.querySelector(".item__gallery-wrapper"),s=n.querySelectorAll(".item__gallery-item");n.addEventListener("mouseenter",(()=>{s.forEach((t=>{t.addEventListener("mouseenter",(()=>{t.parentElement.querySelectorAll(`.${e}`).forEach((t=>t.classList.remove(e))),t.classList.add(e)}))}))})),n.addEventListener("mouseleave",(()=>{n.querySelectorAll(`.${e}`).forEach((t=>t.classList.remove(e))),n.querySelector(".item__gallery-item").classList.add(e)}))}))}))}function fe(){const t=document.getElementById("filter-form"),e=document.querySelectorAll(".filter-group"),i=document.querySelector(".catalog-bar__tags"),n={};t&&(e.forEach((t=>{const e=t.querySelector(".filter-group__header").textContent,i=t.querySelectorAll("input[type='checkbox']:checked"),s=t.querySelectorAll(".rangeslider"),o=[],r=[];i.length+s.length!=0&&(s.forEach((t=>{const i=t.querySelector("[data-range='rangeslider']"),s=t.closest(".filter-group").dataset.propId,r=t.querySelector(".input-min"),a=t.querySelector(".input-max"),l=parseInt(i.dataset.min),c=parseInt(i.dataset.max),h=r.value,u=a.value,d=r.previousElementSibling.textContent,p=a.previousElementSibling.textContent;l==parseInt(h.replace(/[^0-9]+/g,""))&&c==parseInt(u.replace(/[^0-9]+/g,""))||(o.push({title:`${d} ${h} ${p} ${u}`,group:s,name:""}),o.length>0&&Object.assign(n,{[e]:o}))})),i.forEach((t=>{const e=t.closest(".filter-group").dataset.propId,i=t.name,n=t.parentNode.title;r.push({title:n,group:e,name:i})})),r.length>0&&Object.assign(n,{[e]:r}))})),i.innerHTML=function(t){let e="";return Object.entries(t).forEach((([t,i])=>{if("object"==typeof i&&null!==i){let n=Object.keys(i).length;1==n?e+=`<div class="tag"><div class="tag__head"><div class="tag__val">${t}: ${i[0].title}</div><div class="tag__remove js-remove-tag" data-group="${i[0].group}"></div></div></div>`:(e+=`<div class="tag"><div class="tag__head"><div class="tag__val">${t}: ${n} знач.</div><div class="tag__remove js-remove-tag" data-group="${i[0].group}"></div></div>`,e+='<div class="tag__list">',Object.values(i).forEach((t=>{e+=`<div class="tag__item"><div class="tag__val">${t.title}</div><div class="tag__remove js-remove-tag" data-name="${t.name}"></div></div>`})),e+="</div></div>")}})),e}(n))}function me(t){if(!t)return void document.querySelectorAll(".block-collapsible").forEach((t=>me(t)));if(t.querySelector(".block-collapse"))return;let e=t.scrollHeight,i=t.getBoundingClientRect().height,n="is-opened";if(e>i){let i=document.createElement("div"),s=document.createElement("button");s.innerHTML="<span>Показать всё</span><span>Свернуть</span>",s.classList.add("block-collapse__btn","js-block-collpase","is-closed"),i.classList.add("block-collapse"),i.appendChild(s),t.appendChild(i);let o=t.querySelector(".block-collapse"),r=o.getBoundingClientRect().height,a=o.querySelector(".js-block-collpase");if(!a)return;a.addEventListener("click",(()=>{a.classList.toggle("is-closed"),t.style.maxHeight?(t.style.maxHeight=null,t.classList.remove(n)):(t.style.maxHeight=e+r+"px",t.classList.add(n))}))}}function ge(t){if(!t)return;const e=t.querySelectorAll(".js-prop-collapse"),i="is-opened";e.forEach((t=>{let e=t.parentElement,n=e.querySelector('input[type="hidden"]');e.classList.contains(i)||function(t){return!!t&&t.scrollWidth>t.clientWidth}(e)?t.addEventListener("click",(()=>{e.classList.toggle(i),n.value=1==n.value?0:1})):t.classList.add("hidden")}))}function be(t,e=!1){const i=document.body,n="is-active";if(t){const t=document.createElement("div"),s=window.scrollY;t.classList.add("overlay"),e&&(t.dataset.origin=e),i.prepend(t),i.style.top=`-${s}px`,i.classList.add("noscroll"),setTimeout((()=>{t.classList.add(n)}),0)}else{const t=document.querySelector(".overlay"),e=i.style.top;if(!t)return;t.classList.remove(n),i.classList.remove("noscroll"),i.style.top="",window.scrollTo({left:0,top:-1*parseInt(e||"0"),behavior:"instant"}),setTimeout((()=>{t.remove()}),250)}}function ve(t){if(t)return!!window.matchMedia(`(max-width: ${t}px)`).matches}function ye(){const t="is-active",e=document.querySelectorAll(".tabs");e&&e.forEach((e=>{if(e.querySelector(`.${t}`))return;let i=e.querySelectorAll(".tabs__header, .tabs__content");i&&i.forEach((e=>{e.querySelector(".tab-nav, .tab-block").classList.add(t)}))}))}function Se(t){const e="is-active";t&&Ee(t),document.addEventListener("click",(t=>{const i=t.target.closest(".js-tab-nav");if(!i||i.classList.contains(e))return;const n=i.closest(".tabs").querySelectorAll(`.${e}`),s=i.dataset.tab,o=i.closest(".tabs").querySelector(`[data-tab-content=${s}]`);n.forEach((t=>t.classList.remove(e))),i.classList.add(e),o.classList.add(e)}))}function we(t,e,i={}){if(!t)return;let n=[];if(n=Array.isArray(t)?t:[t],"start"==e)n.forEach((t=>{if(!t)return;let e=document.createElement("div");e.classList.add("fetch");let n=document.createElement("div");n.classList.add("fetch__ring"),i.class&&e.classList.add(i.class),e.appendChild(n),t.appendChild(e),setTimeout((()=>{e.style.opacity=1}),0)}));else if("stop"==e)return void n.forEach((t=>{if(!t)return;let e=t.querySelectorAll(".fetch");e&&e.forEach((t=>{setTimeout((()=>{t.style.opacity=0,setTimeout((()=>{t.remove()}),250)}),0)}))}))}function xe(t,e=!1){if(!t)return;const i="btn-loader",n=t.querySelectorAll("span");if("stop"==e)return t.classList.remove(i),void n.forEach((t=>{t.style.opacity=""}));t.classList.add(i),n.forEach((t=>{t.style.opacity=0}))}function Ee(t=!1){const e=new IntersectionObserver(((t,e)=>{t.forEach((t=>{if(t.isIntersecting){let n=t.target,s=n.dataset.url,o={},r={};if(!s)return;n.dataset.params&&(r=JSON.parse(n.dataset.params)),Object.assign(o,r),(async()=>{we(n,"start",{class:"_sm"});let t=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(o)}),e=await t.json();!0===e.status&&(n.innerHTML=e.content),i(n),we(n,"stop")})(),e.unobserve(t.target)}}))}),{});(t?t.querySelectorAll("[data-fetch='true']"):document.querySelectorAll("[data-fetch='true']")).forEach((t=>e.observe(t)));let i=t=>{me(),gt(t),de(),pe(),ye(),Se(t)}}function Pe(t){let e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}function Oe(t,e,i=1){let n;if(i){let t=new Date;t.setTime(t.getTime()+24*i*60*60*1e3),n="; expires="+t.toUTCString()}let s={path:"/",expires:n};s.expires instanceof Date&&(s.expires=s.expires.toUTCString());let o=encodeURIComponent(t)+"="+encodeURIComponent(e);for(let t in s){o+="; "+t;let e=s[t];!0!==e&&(o+="="+e)}document.cookie=o}const Me=document.querySelector(".cookie"),Le=document.querySelector(".js-cookie__accept");if(Me&&Le){let t=()=>{Pe("policyAccepted")||Me.classList.remove("hidden")},e=t=>{t.preventDefault(),Oe("policyAccepted","1",7),Me.classList.add("hidden")};Le.addEventListener("click",e),window.addEventListener("load",t)}const Te=document.querySelector(".header-alert"),ke=document.querySelector(".js-close-header-alert");if(Te&&ke){let t=()=>{Pe("alertHidden")||Te.classList.remove("hidden")},e=t=>{t.preventDefault(),Oe("alertHidden","1",1),Te.classList.add("hidden")};ke.addEventListener("click",e),window.addEventListener("load",t)}addEventListener("DOMContentLoaded",(()=>{(function(t="max"){const e="_dynamic_adapt_",i="data-da",n=function(){const e=[];return[...document.querySelectorAll(`[${i}]`)].forEach((t=>{const n=t.getAttribute(i),[s,o,r]=n.split(",").map((t=>t.trim())),a=document.querySelector(s);var l;a&&e.push({parent:t.parentElement,element:t,to:a,breakpoint:o??"767",order:void 0!==r?(l=r,isNaN(l)?r:Number(r)):"last",index:-1})})),function(e){const i="min"===t?1:0;return[...e].sort(((t,e)=>t.breakpoint===e.breakpoint?t.order===e.order?0:"first"===t.order||"last"===e.order?-1*i:"last"===t.order||"first"===e.order?1*i:0:(t.breakpoint-e.breakpoint)*i))}(e)}();[...new Set(n.map((({breakpoint:e})=>`(${t}-width: ${e}px),${e}`)))].map((t=>{const[e,i]=t.split(",");return{query:e,breakpoint:i}})).forEach((t=>{const i=window.matchMedia(t.query),s=function(t,i){return function(){t.matches?(i.forEach((t=>{!function(t){const{to:i,element:n,order:s}=t;t.index=function(t,e){return[...e.children].indexOf(t)}(t.element,t.element.parentElement),n.classList.add(e),"last"===s||s>=i.children.length?i.append(n):"first"!==s?i.children[s].before(n):i.prepend(n)}(t)})),i.reverse()):(i.forEach((t=>{t.element.classList.contains(e)&&function(t){const{parent:i,element:n,index:s}=t;n.classList.remove(e),s>=0&&i.children[s]?i.children[s].before(n):i.append(n)}(t)})),i.reverse())}}(i,n.filter((({breakpoint:e})=>e===t.breakpoint)));i.addEventListener("change",s),s()}))})(),function(){const t=document.querySelector("header"),e="is-ontop",i="is-hidden";if(!t)return;let n=0;window.addEventListener("scroll",(()=>{0==window.scrollY&&t.classList.add(e),window.scrollY>56&&(window.scrollY>n?(t.classList.remove(e),t.classList.add(i)):window.scrollY<n&&(t.classList.add("is-sticky"),t.classList.remove(i))),n=window.scrollY}))}(),function(){const t=document.querySelector(".nav__menu"),e=document.getElementById("menu-toggle"),i=document.querySelector(".catalog__submenu"),n=document.querySelectorAll(".catalog__list .catalog__link"),s=document.querySelector(".nav__back"),o="is-active";n.forEach((t=>{t.addEventListener("click",(e=>{const n=t.nextElementSibling;if(n){e.preventDefault();const t=n.cloneNode(!0);t.classList.add(o),i.classList.add(o),i.innerHTML="",i.append(t),s.classList.add(o)}}))})),s.addEventListener("click",(()=>{s.classList.remove(o),i.classList.remove(o),setTimeout((()=>{i.innerHTML=""}),250)})),e.addEventListener("change",(()=>{e.checked||(s.classList.remove(o),i.classList.remove(o),t.classList.remove("hide-nav"),i.innerHTML="")})),window.addEventListener("resize",(()=>{e.checked&&e.click()}))}(),function(){const t=document.querySelector(".nav__menu"),e=document.getElementById("menu-toggle"),i=document.querySelector(".nav__search"),n=document.querySelector(".input_nav-search"),s=document.querySelector(".js-close-search"),o="is-active",r="hide-nav";n.addEventListener("focus",(()=>{i.classList.add(o),e.checked&&t.classList.add(r)})),s.addEventListener("click",(()=>{i.classList.remove(o),t.classList.remove(r)})),document.addEventListener("click",(t=>{i.contains(t.target)||e.checked||i.classList.remove(o)}))}(),document.addEventListener("click",(t=>{const e=t.target.closest(".js-close"),i="is-active";if(!e)return;const n=e.closest(`.${i}`);n&&(be(0),n.classList.remove(i))})),document.addEventListener("click",(t=>{const e=t.target.closest(".js-show");if(!e)return;const i=e.dataset.show;i&&(be(1,i),document.querySelector(`.${i}`).classList.add("is-active"))})),window.addEventListener("click",(t=>{document.querySelectorAll(".drop-down__box").forEach((e=>{e.contains(t.target)||e.parentNode.classList.remove("is-active")}))})),document.querySelectorAll(".js-drop-down").forEach((t=>{t.addEventListener("click",(e=>{e.stopPropagation(),t.classList.toggle("is-active")}))})),document.addEventListener("click",(t=>{const e=t.target;if(e.classList.contains("overlay")){const t=e.dataset.origin;document.querySelector(`.${t}`).classList.remove("is-active"),be(0)}})),function(){const t="is-collapsed";document.addEventListener("click",(n=>{const s=n.target.closest(".js-collapse");s&&(s.classList.contains(t)?(i(s),s.classList.remove(t)):e(s))}));let e=t=>{const e=t.nextElementSibling,i=e.scrollHeight,n=e.style.transition;e.style.transition="",requestAnimationFrame((function(){e.style.height=i+"px",e.style.transition=n,requestAnimationFrame((function(){e.style.height="0px",t.classList.add("is-collapsed")}))}))},i=t=>{const e=t.nextElementSibling,i=e.scrollHeight;e.style.height=i+"px",t.classList.remove("is-collapsed")}}(),document.querySelectorAll(".js-accordion__trigger").forEach((t=>{t.addEventListener("click",(()=>{const e=t.parentElement,i=t.nextElementSibling;e.classList.contains("on")&&(t.classList.toggle("is-opened"),i.style.maxHeight?i.style.maxHeight=null:i.style.maxHeight=i.scrollHeight+"px")}))})),function(){const t=document.querySelectorAll(".f-menu.js-accordion");let e;["load","resize"].forEach((i=>window.addEventListener(i,(()=>{e||(e=setTimeout((function(){e=null,ve("767")?t.forEach((t=>{t.classList.add("on")})):t.forEach((t=>{t.classList.remove("on")}))}),200))}))))}(),ye(),Se(),function(){const t=document.querySelectorAll(".idea-marker__btn"),e="is-active";t&&(t.forEach((t=>{t.addEventListener("click",(()=>{if(t.parentElement.classList.toggle(e),ve("576")){const i=document.querySelector(".idea-mobile-content div");if(i){const n=t.nextElementSibling.cloneNode(!0);i.innerHTML="",i.parentElement.classList.add(e),i.append(n)}}}))})),document.addEventListener("click",(t=>{document.querySelectorAll(".idea-marker.is-active").forEach((i=>{i.contains(t.target)||i.classList.remove(e)}))})))}(),function(){const t=document.querySelectorAll(".idea-marker__content");["load","resize"].forEach((e=>window.addEventListener(e,(()=>{t.forEach((t=>{const e=t.closest(".idea").offsetLeft,i=t.parentElement,n=i.offsetWidth,s=i.offsetLeft,o=i.getBoundingClientRect().right,r=n/2+s+e-16,a=window.innerWidth-o+n/2-32,l=t.offsetWidth,c=r<l/2,h=a<l/2;t.classList[c?"add":"remove"]("marker-l"),t.classList[h?"add":"remove"]("marker-r")}))}))))}(),Ee(),ye(),gt(),de(),pe(),document.addEventListener("click",(t=>{const e=t.target.closest(".js-fav");if(!e)return;const i=e.dataset.id,n=e.dataset.url,s={id:i};(async()=>{let t=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(s)}),i=await t.json();i&&!0===i.status&&e.parentElement.classList.toggle("is-active")})()})),ue(),function(){const t=document.querySelector(".catalog-items");t&&t.addEventListener("mouseover",(t=>{const e=t.target.closest(".item");e&&e.addEventListener("mouseenter",(()=>{const t=e.dataset.url,i=e.querySelector(".item__details"),n=e.querySelector(".skeleton");i.innerHTML.trim().length>0&&!n||(function(t,e){if(!t)return;const i=document.getElementById(e);t.innerHTML="",t.appendChild(i.content.cloneNode(!0))}(i,"tpl-props"),(async()=>{let n=await fetch(t),s=await n.text();s&&(i.innerHTML="",i.innerHTML=s,ge(e))})())}))}))}(),document.addEventListener("change",(t=>{if(!t.target.closest(".prop"))return;const e=t.target,i=e.closest(".item"),n=e.closest(".item__details"),s=e.closest(".product__options"),o=e.closest("form");if(!o)return;let r=new FormData(o),a={},l={},c=e.dataset.url,h=Object.fromEntries(r.entries());a={name:e.name,checked:!0},e.dataset.params&&(l=JSON.parse(e.dataset.params)),Object.assign(a,l,h),i&&(async()=>{we([i,n],"start");let t=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(a)}),e=await t.json();!0===e.status&&u(e,i),de(i),ge(i),we([i,n],"stop")})(),s&&(async()=>{we([s],"start");let t=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(a)}),e=await t.json();!0===e.status&&u(e,s),we([s],"stop")})();let u=(t,e)=>{Object.entries(t.chunks).forEach((([t,i])=>{if(i.length>0){let n=e.querySelector(`[data-id=${t}]`);if(!n)return void console.log(`data-id ${t} not found`);n.innerHTML=i}}))}})),function(){const t=document.querySelector(".filter"),e=document.getElementById("filter-form"),i=document.querySelector(".js-filter-reset"),n=document.querySelectorAll("input[name='sort']"),s=document.querySelector(".content_columns"),o=document.querySelector(".product");if(!t&&!o)return;let r=async()=>{let t=document.querySelector(".filter.is-active"),i=new FormData(e),n=e.action,o=Object.fromEntries(i.entries());we([s,t],"start");let r=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(o)}),h=await r.json();try{if(!h.url)throw new Error("url is empty");e.action=h.url}catch(t){return console.log(t),void we(s,"stop")}c(h.url),r=await fetch(h.url),h=await r.json();try{if(!0!==h.status||!h.chunks)throw new Error("chunks response is incorrect");a(h.chunks)}catch(t){return console.log(t),void we(s,"stop")}l(),we(s,"stop")},a=t=>{t&&Object.entries(t).forEach((([t,e])=>{let i=document.querySelector(`[data-id=${t}]`);i?i.innerHTML=e:console.log(`data-id ${t} not found`)}))},l=()=>{gt(),de(),pe(),ue()},c=t=>{window.history.pushState("","",t.replace("https://deviart.ru/zamm/",""))},h=t=>{const e=t.closest("form")||t.closest(".item__props").querySelector("form");let i=new FormData(e),n={},s={},o=t.dataset.url,r=t.dataset.id,a=Object.fromEntries(i.entries());n={id:r},t.dataset.params&&(s=JSON.parse(t.dataset.params)),Object.assign(n,s,a),(async()=>{xe(t);let e=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(n)}),i=await e.json();if(!0===i.status){t.classList.add("in-cart");let e=document.querySelector('[data-id="amount"]');if(!e)return void console.log("data-id amount not found");e.dataset.amount=i.amount}xe(t,"stop")})()};t&&(e.addEventListener("input",(()=>{i.classList.remove("invisible"),r(),fe()})),i.addEventListener("click",(()=>{const t=document.getElementById("filter-reset"),e=document.querySelectorAll("input[type='checkbox']:checked");e.length>0&&e.forEach((t=>t.checked=!1)),fe(),t.value="Y",r(),t.value="N",i.classList.add("invisible")})),e.addEventListener("submit",(t=>{t.preventDefault(),r(),fe()})),n.forEach((t=>{t.addEventListener("change",(()=>{const i=document.getElementById("filter-sort"),n=t.closest(".js-drop-down.is-active"),o=n.querySelector(".drop-down__head"),r={};i.value=t.value,o.textContent=t.nextElementSibling.textContent,n.classList.remove("is-active"),r[t.name]=parseInt(t.value),(async t=>{if(!t)return;let i=(e.action.includes("?")?"&":"?")+new URLSearchParams(t).toString(),n=e.action+i;we(s,"start");let o=await fetch(n),r=await o.json();!0===r.status&&(r.url&&(e.action=r.url,c(r.url)),r.chunks&&a(r.chunks)),l(),we(s,"stop")})(r)}))})),document.addEventListener("click",(t=>{const i=t.target.closest(".js-load-more");i&&(async t=>{if(!t)return;const i=t.dataset.url,n=document.querySelector(`.${t.dataset.target}`);if(!n||!i)return;xe(t);let s=await fetch(i),o=await s.json();if(!0===o.status){if(o.url&&(e.action=o.url,c(o.url)),o.products){let t=document.createElement("div");t.innerHTML=o.products,t.childNodes.forEach((t=>{n.appendChild(t)}))}o.chunks&&a(o.chunks)}l(),xe(t,"stop")})(i)}))),document.addEventListener("click",(t=>{if(t.target.closest(".js-add-to-cart")){let e=t.target.closest(".js-add-to-cart"),i="in-cart";if(!e)return;if(e.classList.contains(i)&&e.dataset.cart)return void window.location.assign(e.dataset.cart);h(e)}})),document.addEventListener("change",(t=>{if("amount"==t.target.name){let e=t.target.closest(".product__purchase").querySelector(".js-add-to-cart");if(!e)return;h(e)}}))}(),fe(),document.addEventListener("click",(t=>{const e=t.target.closest(".js-remove-tag");if(e&&(e.dataset.name&&document.querySelector(`[name=${e.dataset.name}]`).click(),e.dataset.group)){const t=document.getElementById("filter-form"),i=document.querySelector(`[data-prop-id=${e.dataset.group}]`),n=i.querySelectorAll("input[type='checkbox']:checked"),s=i.querySelector('[data-range="rangeslider"]');n.length>0&&n.forEach((t=>t.checked=!1)),s&&s.noUiSlider.set([0,999999999]),fe(),t.dispatchEvent(new Event("submit"))}})),function(){const t=document.querySelector(".product");t&&t.addEventListener("click",(t=>{if(t.target.classList.contains("js-btn-minus")){let e=t.target.nextElementSibling;if(e.getAttribute("min")==e.value)return;e.stepDown();let i=new Event("change",{bubbles:!0});e.dispatchEvent(i)}if(t.target.classList.contains("js-btn-plus")){let e=t.target.previousElementSibling;if(e.getAttribute("max")==e.value)return;e.stepUp();let i=new Event("change",{bubbles:!0});e.dispatchEvent(i)}}))}(),me()}))})()})();